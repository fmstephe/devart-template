library gospec;

class SpecText {
  
  static final String _text = "DocumentsPackagesTheProjectHelpBlogPlayTheGoProgrammingLanguageTheGoProgrammingLanguageSpecificationVersionofNov13,2013IntroductionNotationSourcecoderepresentationCharactersLettersanddigitsLexicalelementsCommentsTokensSemicolonsIdentifiersKeywordsOperatorsandDelimitersIntegerliteralsFloating-pointliteralsImaginaryliteralsRuneliteralsStringliteralsConstantsTypesMethodsetsBooleantypesNumerictypesStringtypesArraytypesSlicetypesStructtypesPointertypesFunctiontypesInterfacetypesMaptypesChanneltypesPropertiesoftypesandvaluesTypeidentityAssignabilityBlocksDeclarationsandscopeLabelscopesBlankidentifierPredeclaredidentifiersExportedidentifiersUniquenessofidentifiersConstantdeclarationsIotaTypedeclarationsVariabledeclarationsShortvariabledeclarationsFunctiondeclarationsMethoddeclarationsExpressionsOperandsQualifiedidentifiersCompositeliteralsFunctionliteralsPrimaryexpressionsSelectorsIndexexpressionsSliceexpressionsTypeassertionsCallsPassingargumentsto...parametersOperatorsOperatorprecedenceArithmeticoperatorsIntegeroverflowComparisonoperatorsLogicaloperatorsAddressoperatorsReceiveoperatorMethodexpressionsMethodvaluesConversionsConstantexpressionsOrderofevaluationStatementsTerminatingstatementsEmptystatementsLabeledstatementsExpressionstatementsSendstatementsIncDecstatementsAssignmentsIfstatementsSwitchstatementsForstatementsGostatementsSelectstatementsReturnstatementsBreakstatementsContinuestatementsGotostatementsFallthroughstatementsDeferstatementsBuilt-infunctionsCloseLengthandcapacityAllocationMakingslices,mapsandchannelsAppendingtoandcopyingslicesDeletionofmapelementsManipulatingcomplexnumbersHandlingpanicsBootstrappingPackagesSourcefileorganizationPackageclauseImportdeclarationsAnexamplepackagePrograminitializationandexecutionThezerovalueProgramexecutionErrorsRun-timepanicsSystemconsiderationsPackageunsafeSizeandalignmentguaranteesIntroductionThisisareferencemanualfortheGoprogramminglanguage.Formoreinformationandotherdocuments,seehttpgolang.org.Goisageneral-purposelanguagedesignedwithsystemsprogramminginmind.Itisstronglytypedandgarbage-collectedandhasexplicitsupportforconcurrentprogramming.Programsareconstructedfrompackages,whosepropertiesallowefficientmanagementofdependencies.Theexistingimplementationsuseatraditionalcompilelinkmodeltogenerateexecutablebinaries.Thegrammariscompactandregular,allowingforeasyanalysisbyautomatictoolssuchasintegrateddevelopmentenvironments.NotationThesyntaxisspecifiedusingExtendedBackus-NaurForm(EBNF)Production=production_name=[Expression]..Expression=Alternative{|Alternative}.Alternative=Term{Term}.Term=production_name|token[…token]|Group|Option|Repetition.Group=(Expression).Option=[Expression].Repetition={Expression}.Productionsareexpressionsconstructedfromtermsandthefollowingoperators,inincreasingprecedence|alternation()grouping[]option(0or1times){}repetition(0tontimes)Lower-caseproductionnamesareusedtoidentifylexicaltokens.Non-terminalsareinCamelCase.Lexicaltokensareenclosedindoublequotesorbackquotes.Theforma…brepresentsthesetofcharactersfromathroughbasalternatives.Thehorizontalellipsis…isalsousedelsewhereinthespectoinformallydenotevariousenumerationsorcodesnippetsthatarenotfurtherspecified.Thecharacter…(asopposedtothethreecharacters...)isnotatokenoftheGolanguage.SourcecoderepresentationSourcecodeisUnicodetextencodedinUTF-8.Thetextisnotcanonicalized,soasingleaccentedcodepointisdistinctfromthesamecharacterconstructedfromcombininganaccentandaletter;thosearetreatedastwocodepoints.Forsimplicity,thisdocumentwillusetheunqualifiedtermcharactertorefertoaUnicodecodepointinthesourcetext.Eachcodepointisdistinct;forinstance,upperandlowercaselettersaredifferentcharacters.ImplementationrestrictionForcompatibilitywithothertools,acompilermaydisallowtheNULcharacter(U+0000)inthesourcetext.ImplementationrestrictionForcompatibilitywithothertools,acompilermayignoreaUTF-8-encodedbyteordermark(U+FEFF)ifitisthefirstUnicodecodepointinthesourcetext.Abyteordermarkmaybedisallowedanywhereelseinthesource.CharactersThefollowingtermsareusedtodenotespecificUnicodecharacterclassesnewline=*theUnicodecodepointU+000A*.unicode_char=*anarbitraryUnicodecodepointexceptnewline*.unicode_letter=*aUnicodecodepointclassifiedasLetter*.unicode_digit=*aUnicodecodepointclassifiedasDecimalDigit*.InTheUnicodeStandard6.2,Section4.5GeneralCategorydefinesasetofcharactercategories.GotreatsthosecharactersincategoryLu,Ll,Lt,Lm,orLoasUnicodeletters,andthoseincategoryNdasUnicodedigits.LettersanddigitsTheunderscorecharacter_(U+005F)isconsideredaletter.letter=unicode_letter|_.decimal_digit=0…9.octal_digit=0…7.hex_digit=0…9|A…F|a…f.LexicalelementsCommentsTherearetwoformsofcommentsLinecommentsstartwiththecharactersequenceandstopattheendoftheline.Alinecommentactslikeanewline.Generalcommentsstartwiththecharactersequence*andcontinuethroughthecharactersequence*.Ageneralcommentcontainingoneormorenewlinesactslikeanewline,otherwiseitactslikeaspace.Commentsdonotnest.TokensTokensformthevocabularyoftheGolanguage.Therearefourclassesidentifiers,keywords,operatorsanddelimiters,andliterals.Whitespace,formedfromspaces(U+0020),horizontaltabs(U+0009),carriagereturns(U+000D),andnewlines(U+000A),isignoredexceptasitseparatestokensthatwouldotherwisecombineintoasingletoken.Also,anewlineorendoffilemaytriggertheinsertionofasemicolon.Whilebreakingtheinputintotokens,thenexttokenisthelongestsequenceofcharactersthatformavalidtoken.SemicolonsTheformalgrammarusessemicolons;asterminatorsinanumberofproductions.GoprogramsmayomitmostofthesesemicolonsusingthefollowingtworulesWhentheinputisbrokenintotokens,asemicolonisautomaticallyinsertedintothetokenstreamattheendofanon-blanklineifthelinesfinaltokenisanidentifieraninteger,floating-point,imaginary,rune,orstringliteraloneofthekeywordsbreak,continue,fallthrough,orreturnoneoftheoperatorsanddelimiters++,--,),],or}Toallowcomplexstatementstooccupyasingleline,asemicolonmaybeomittedbeforeaclosing)or}.Toreflectidiomaticuse,codeexamplesinthisdocumentelidesemicolonsusingtheserules.IdentifiersIdentifiersnameprogramentitiessuchasvariablesandtypes.Anidentifierisasequenceofoneormorelettersanddigits.Thefirstcharacterinanidentifiermustbealetter.identifier=letter{letter|unicode_digit}.a_x9ThisVariableIsExportedαβSomeidentifiersarepredeclared.KeywordsThefollowingkeywordsarereservedandmaynotbeusedasidentifiers.breakdefaultfuncinterfaceselectcasedefergomapstructchanelsegotopackageswitchconstfallthroughifrangetypecontinueforimportreturnvarOperatorsandDelimitersThefollowingcharactersequencesrepresentoperators,delimiters,andotherspecialtokens+&+=&=&&==!=()-|-=|=||<<=[]*^*=^=<->>={}<<=<<=++==,;%>>%=>>=--!....&^&^=IntegerliteralsAnintegerliteralisasequenceofdigitsrepresentinganintegerconstant.Anoptionalprefixsetsanon-decimalbase0foroctal,0xor0Xforhexadecimal.Inhexadecimalliterals,lettersa-fandA-Frepresentvalues10through15.int_lit=decimal_lit|octal_lit|hex_lit.decimal_lit=(1…9){decimal_digit}.octal_lit=0{octal_digit}.hex_lit=0(x|X)hex_digit{hex_digit}.4206000xBadFace170141183460469231731687303715884105727Floating-pointliteralsAfloating-pointliteralisadecimalrepresentationofafloating-pointconstant.Ithasanintegerpart,adecimalpoint,afractionalpart,andanexponentpart.Theintegerandfractionalpartcomprisedecimaldigits;theexponentpartisaneorEfollowedbyanoptionallysigneddecimalexponent.Oneoftheintegerpartorthefractionalpartmaybeelided;oneofthedecimalpointortheexponentmaybeelided.float_lit=decimals.[decimals][exponent]|decimalsexponent|.decimals[exponent].decimals=decimal_digit{decimal_digit}.exponent=(e|E)[+|-]decimals.0.72.40072.40==72.402.718281.e+06.67428e-111E6.25.12345E+5ImaginaryliteralsAnimaginaryliteralisadecimalrepresentationoftheimaginarypartofacomplexconstant.Itconsistsofafloating-pointliteralordecimalintegerfollowedbythelower-caseletteri.imaginary_lit=(decimals|float_lit)i.0i011i==11i0.i2.71828i1.e+0i6.67428e-11i1E6i.25i.12345E+5iRuneliteralsAruneliteralrepresentsaruneconstant,anintegervalueidentifyingaUnicodecodepoint.Aruneliteralisexpressedasoneormorecharactersenclosedinsinglequotes.Withinthequotes,anycharactermayappearexceptsinglequoteandnewline.AsinglequotedcharacterrepresentstheUnicodevalueofthecharacteritself,whilemulti-charactersequencesbeginningwithabackslashencodevaluesinvariousformats.Thesimplestformrepresentsthesinglecharacterwithinthequotes;sinceGosourcetextisUnicodecharactersencodedinUTF-8,multipleUTF-8-encodedbytesmayrepresentasingleintegervalue.Forinstance,theliteralaholdsasinglebyterepresentingaliterala,UnicodeU+0061,value0x61,whileäholdstwobytes(0xc30xa4)representingaliterala-dieresis,U+00E4,value0xe4.SeveralbackslashescapesallowarbitraryvaluestobeencodedasASCIItext.Therearefourwaystorepresenttheintegervalueasanumericconstantxfollowedbyexactlytwohexadecimaldigits;ufollowedbyexactlyfourhexadecimaldigits;Ufollowedbyexactlyeighthexadecimaldigits,andaplainbackslashfollowedbyexactlythreeoctaldigits.Ineachcasethevalueoftheliteralisthevaluerepresentedbythedigitsinthecorrespondingbase.Althoughtheserepresentationsallresultinaninteger,theyhavedifferentvalidranges.Octalescapesmustrepresentavaluebetween0and255inclusive.Hexadecimalescapessatisfythisconditionbyconstruction.TheescapesuandUrepresentUnicodecodepointssowithinthemsomevaluesareillegal,inparticularthoseabove0x10FFFFandsurrogatehalves.Afterabackslash,certainsingle-characterescapesrepresentspecialvaluesaU+0007alertorbellbU+0008backspacefU+000CformfeednU+000AlinefeedornewlinerU+000DcarriagereturntU+0009horizontaltabvU+000bverticaltabU+005cbackslashU+0027singlequote(validescapeonlywithinruneliterals)U+0022doublequote(validescapeonlywithinstringliterals)Allothersequencesstartingwithabackslashareillegalinsideruneliterals.rune_lit=(unicode_value|byte_value).unicode_value=unicode_char|little_u_value|big_u_value|escaped_char.byte_value=octal_byte_value|hex_byte_value.octal_byte_value=octal_digitoctal_digitoctal_digit.hex_byte_value=xhex_digithex_digit.little_u_value=uhex_digithex_digithex_digithex_digit.big_u_value=Uhex_digithex_digithex_digithex_digithex_digithex_digithex_digithex_digit.escaped_char=(a|b|f|n|r|t|v|||).aä本t000007377x07xffu12e4U00101234aaillegaltoomanycharactersxaillegaltoofewhexadecimaldigits0illegaltoofewoctaldigitsuDFFFillegalsurrogatehalfU00110000illegalinvalidUnicodecodepointStringliteralsAstringliteralrepresentsastringconstantobtainedfromconcatenatingasequenceofcharacters.Therearetwoformsrawstringliteralsandinterpretedstringliterals.Rawstringliteralsarecharactersequencesbetweenbackquotes.Withinthequotes,anycharacterislegalexceptbackquote.Thevalueofarawstringliteralisthestringcomposedoftheuninterpreted(implicitlyUTF-8-encoded)charactersbetweenthequotes;inparticular,backslasheshavenospecialmeaningandthestringmaycontainnewlines.Carriagereturnsinsiderawstringliteralsarediscardedfromtherawstringvalue.Interpretedstringliteralsarecharactersequencesbetweendoublequotes.Thetextbetweenthequotes,whichmaynotcontainnewlines,formsthevalueoftheliteral,withbackslashescapesinterpretedastheyareinruneliterals(exceptthatisillegalandislegal),withthesamerestrictions.Thethree-digitoctal(nnn)andtwo-digithexadecimal(xnn)escapesrepresentindividualbytesoftheresultingstring;allotherescapesrepresentthe(possiblymulti-byte)UTF-8encodingofindividualcharacters.Thusinsideastringliteral377andxFFrepresentasinglebyteofvalue0xFF=255,whileÿ,u00FF,U000000FFandxc3xbfrepresentthetwobytes0xc30xbfoftheUTF-8encodingofcharacterU+00FF.string_lit=raw_string_lit|interpreted_string_lit.raw_string_lit={unicode_char|newline}.interpreted_string_lit={unicode_value|byte_value}.abcsameasabcnnsameasnnnnHello,world!n日本語u65e5本U00008a9exffu00FFuD800illegalsurrogatehalfU00110000illegalinvalidUnicodecodepointTheseexamplesallrepresentthesamestring日本語UTF-8inputtext日本語UTF-8inputtextasarawliteralu65e5u672cu8a9etheexplicitUnicodecodepointsU000065e5U0000672cU00008a9etheexplicitUnicodecodepointsxe6x97xa5xe6x9cxacxe8xaax9etheexplicitUTF-8bytesIfthesourcecoderepresentsacharacterastwocodepoints,suchasacombiningforminvolvinganaccentandaletter,theresultwillbeanerrorifplacedinaruneliteral(itisnotasinglecodepoint),andwillappearastwocodepointsifplacedinastringliteral.ConstantsTherearebooleanconstants,runeconstants,integerconstants,floating-pointconstants,complexconstants,andstringconstants.Rune,integer,floating-point,andcomplexconstantsarecollectivelycallednumericconstants.Aconstantvalueisrepresentedbyarune,integer,floating-point,imaginary,orstringliteral,anidentifierdenotingaconstant,aconstantexpression,aconversionwitharesultthatisaconstant,ortheresultvalueofsomebuilt-infunctionssuchasunsafe.Sizeofappliedtoanyvalue,caporlenappliedtosomeexpressions,realandimagappliedtoacomplexconstantandcomplexappliedtonumericconstants.Thebooleantruthvaluesarerepresentedbythepredeclaredconstantstrueandfalse.Thepredeclaredidentifieriotadenotesanintegerconstant.Ingeneral,complexconstantsareaformofconstantexpressionandarediscussedinthatsection.Numericconstantsrepresentvaluesofarbitraryprecisionanddonotoverflow.Constantsmaybetypedoruntyped.Literalconstants,true,false,iota,andcertainconstantexpressionscontainingonlyuntypedconstantoperandsareuntyped.Aconstantmaybegivenatypeexplicitlybyaconstantdeclarationorconversion,orimplicitlywhenusedinavariabledeclarationoranassignmentorasanoperandinanexpression.Itisanerroriftheconstantvaluecannotberepresentedasavalueoftherespectivetype.Forinstance,3.0canbegivenanyintegeroranyfloating-pointtype,while2147483648.0(equalto1<<31)canbegiventhetypesfloat32,float64,oruint32butnotint32orstring.TherearenoconstantsdenotingtheIEEE-754infinityandnot-a-numbervalues,butthemathpackagesInf,NaN,IsInf,andIsNaNfunctionsreturnandtestforthosevaluesatruntime.ImplementationrestrictionAlthoughnumericconstantshavearbitraryprecisioninthelanguage,acompilermayimplementthemusinganinternalrepresentationwithlimitedprecision.Thatsaid,everyimplementationmustRepresentintegerconstantswithatleast256bits.Representfloating-pointconstants,includingthepartsofacomplexconstant,withamantissaofatleast256bitsandasignedexponentofatleast32bits.Giveanerrorifunabletorepresentanintegerconstantprecisely.Giveanerrorifunabletorepresentafloating-pointorcomplexconstantduetooverflow.Roundtothenearestrepresentableconstantifunabletorepresentafloating-pointorcomplexconstantduetolimitsonprecision.Theserequirementsapplybothtoliteralconstantsandtotheresultofevaluatingconstantexpressions.TypesAtypedeterminesthesetofvaluesandoperationsspecifictovaluesofthattype.Typesmaybenamedorunnamed.Namedtypesarespecifiedbya(possiblyqualified)typename;unnamedtypesarespecifiedusingatypeliteral,whichcomposesanewtypefromexistingtypes.Type=TypeName|TypeLit|(Type).TypeName=identifier|QualifiedIdent.TypeLit=ArrayType|StructType|PointerType|FunctionType|InterfaceType|SliceType|MapType|ChannelType.Namedinstancesoftheboolean,numeric,andstringtypesarepredeclared.Compositetypes—array,struct,pointer,function,interface,slice,map,andchanneltypes—maybeconstructedusingtypeliterals.Thestatictype(orjusttype)ofavariableisthetypedefinedbyitsdeclaration.Variablesofinterfacetypealsohaveadistinctdynamictype,whichistheactualtypeofthevaluestoredinthevariableatruntime.Thedynamictypemayvaryduringexecutionbutisalwaysassignabletothestatictypeoftheinterfacevariable.Fornon-interfacetypes,thedynamictypeisalwaysthestatictype.EachtypeThasanunderlyingtypeIfTisapredeclaredtypeoratypeliteral,thecorrespondingunderlyingtypeisTitself.Otherwise,TsunderlyingtypeistheunderlyingtypeofthetypetowhichTrefersinitstypedeclaration.typeT1stringtypeT2T1typeT3[]T1typeT4T3Theunderlyingtypeofstring,T1,andT2isstring.Theunderlyingtypeof[]T1,T3,andT4is[]T1.MethodsetsAtypemayhaveamethodsetassociatedwithit(§Interfacetypes,§Methoddeclarations).Themethodsetofaninterfacetypeisitsinterface.ThemethodsetofanyothertypeTconsistsofallmethodswithreceivertypeT.Themethodsetofthecorrespondingpointertype*Tisthesetofallmethodswithreceiver*TorT(thatis,italsocontainsthemethodsetofT).Furtherrulesapplytostructscontaininganonymousfields,asdescribedinthesectiononstructtypes.Anyothertypehasanemptymethodset.Inamethodset,eachmethodmusthaveauniquemethodname.Themethodsetofatypedeterminestheinterfacesthatthetypeimplementsandthemethodsthatcanbecalledusingareceiverofthattype.BooleantypesAbooleantyperepresentsthesetofBooleantruthvaluesdenotedbythepredeclaredconstantstrueandfalse.Thepredeclaredbooleantypeisbool.NumerictypesAnumerictyperepresentssetsofintegerorfloating-pointvalues.Thepredeclaredarchitecture-independentnumerictypesareuint8thesetofallunsigned8-bitintegers(0to255)uint16thesetofallunsigned16-bitintegers(0to65535)uint32thesetofallunsigned32-bitintegers(0to4294967295)uint64thesetofallunsigned64-bitintegers(0to18446744073709551615)int8thesetofallsigned8-bitintegers(-128to127)int16thesetofallsigned16-bitintegers(-32768to32767)int32thesetofallsigned32-bitintegers(-2147483648to2147483647)int64thesetofallsigned64-bitintegers(-9223372036854775808to9223372036854775807)float32thesetofallIEEE-75432-bitfloating-pointnumbersfloat64thesetofallIEEE-75464-bitfloating-pointnumberscomplex64thesetofallcomplexnumberswithfloat32realandimaginarypartscomplex128thesetofallcomplexnumberswithfloat64realandimaginarypartsbytealiasforuint8runealiasforint32Thevalueofann-bitintegerisnbitswideandrepresentedusingtwoscomplementarithmetic.Thereisalsoasetofpredeclarednumerictypeswithimplementation-specificsizesuinteither32or64bitsintsamesizeasuintuintptranunsignedintegerlargeenoughtostoretheuninterpretedbitsofapointervalueToavoidportabilityissuesallnumerictypesaredistinctexceptbyte,whichisanaliasforuint8,andrune,whichisanaliasforint32.Conversionsarerequiredwhendifferentnumerictypesaremixedinanexpressionorassignment.Forinstance,int32andintarenotthesametypeeventhoughtheymayhavethesamesizeonaparticulararchitecture.StringtypesAstringtyperepresentsthesetofstringvalues.Astringvalueisa(possiblyempty)sequenceofbytes.Stringsareimmutableoncecreated,itisimpossibletochangethecontentsofastring.Thepredeclaredstringtypeisstring.Thelengthofastrings(itssizeinbytes)canbediscoveredusingthebuilt-infunctionlen.Thelengthisacompile-timeconstantifthestringisaconstant.Astringsbytescanbeaccessedbyintegerindices0throughlen(s)-1.Itisillegaltotaketheaddressofsuchanelement;ifs[i]istheithbyteofastring,&s[i]isinvalid.ArraytypesAnarrayisanumberedsequenceofelementsofasingletype,calledtheelementtype.Thenumberofelementsiscalledthelengthandisnevernegative.ArrayType=[ArrayLength]ElementType.ArrayLength=Expression.ElementType=Type.Thelengthispartofthearraystype;itmustevaluatetoanon-negativeconstantrepresentablebyavalueoftypeint.Thelengthofarrayacanbediscoveredusingthebuilt-infunctionlen.Theelementscanbeaddressedbyintegerindices0throughlen(a)-1.Arraytypesarealwaysone-dimensionalbutmaybecomposedtoformmulti-dimensionaltypes.[32]byte[2*N]struct{x,yint32}[1000]*float64[3][5]int[2][2][2]float64sameas[2]([2]([2]float64))SlicetypesAsliceisadescriptorforacontiguoussegmentofanunderlyingarrayandprovidesaccesstoanumberedsequenceofelementsfromthatarray.Aslicetypedenotesthesetofallslicesofarraysofitselementtype.Thevalueofanuninitializedsliceisnil.SliceType=[]ElementType.Likearrays,slicesareindexableandhavealength.Thelengthofaslicescanbediscoveredbythebuilt-infunctionlen;unlikewitharraysitmaychangeduringexecution.Theelementscanbeaddressedbyintegerindices0throughlen(s)-1.Thesliceindexofagivenelementmaybelessthantheindexofthesameelementintheunderlyingarray.Aslice,onceinitialized,isalwaysassociatedwithanunderlyingarraythatholdsitselements.Aslicethereforesharesstoragewithitsarrayandwithotherslicesofthesamearray;bycontrast,distinctarraysalwaysrepresentdistinctstorage.Thearrayunderlyingaslicemayextendpasttheendoftheslice.Thecapacityisameasureofthatextentitisthesumofthelengthofthesliceandthelengthofthearraybeyondtheslice;asliceoflengthuptothatcapacitycanbecreatedbyslicinganewonefromtheoriginalslice.Thecapacityofasliceacanbediscoveredusingthebuilt-infunctioncap(a).Anew,initializedslicevalueforagivenelementtypeTismadeusingthebuilt-infunctionmake,whichtakesaslicetypeandparametersspecifyingthelengthandoptionallythecapacity.Aslicecreatedwithmakealwaysallocatesanew,hiddenarraytowhichthereturnedslicevaluerefers.Thatis,executingmake([]T,length,capacity)producesthesamesliceasallocatinganarrayandslicingit,sothesetwoexpressionsareequivalentmake([]int,50,100)new([100]int)[050]Likearrays,slicesarealwaysone-dimensionalbutmaybecomposedtoconstructhigher-dimensionalobjects.Witharraysofarrays,theinnerarraysare,byconstruction,alwaysthesamelength;howeverwithslicesofslices(orarraysofslices),theinnerlengthsmayvarydynamically.Moreover,theinnerslicesmustbeinitializedindividually.StructtypesAstructisasequenceofnamedelements,calledfields,eachofwhichhasanameandatype.Fieldnamesmaybespecifiedexplicitly(IdentifierList)orimplicitly(AnonymousField).Withinastruct,non-blankfieldnamesmustbeunique.StructType=struct{{FieldDecl;}}.FieldDecl=(IdentifierListType|AnonymousField)[Tag].AnonymousField=[*]TypeName.Tag=string_lit.Anemptystruct.struct{}Astructwith6fields.struct{x,yintufloat32_float32paddingA*[]intFfunc()}Afielddeclaredwithatypebutnoexplicitfieldnameisananonymousfield,alsocalledanembeddedfieldoranembeddingofthetypeinthestruct.AnembeddedtypemustbespecifiedasatypenameTorasapointertoanon-interfacetypename*T,andTitselfmaynotbeapointertype.Theunqualifiedtypenameactsasthefieldname.AstructwithfouranonymousfieldsoftypeT1,*T2,P.T3and*P.T4struct{T1fieldnameisT1*T2fieldnameisT2P.T3fieldnameisT3*P.T4fieldnameisT4x,yintfieldnamesarexandy}Thefollowingdeclarationisillegalbecausefieldnamesmustbeuniqueinastructtypestruct{Tconflictswithanonymousfield*Tand*P.T*TconflictswithanonymousfieldTand*P.T*P.TconflictswithanonymousfieldTand*T}Afieldormethodfofananonymousfieldinastructxiscalledpromotedifx.fisalegalselectorthatdenotesthatfieldormethodf.Promotedfieldsactlikeordinaryfieldsofastructexceptthattheycannotbeusedasfieldnamesincompositeliteralsofthestruct.GivenastructtypeSandatypenamedT,promotedmethodsareincludedinthemethodsetofthestructasfollowsIfScontainsananonymousfieldT,themethodsetsofSand*SbothincludepromotedmethodswithreceiverT.Themethodsetof*Salsoincludespromotedmethodswithreceiver*T.IfScontainsananonymousfield*T,themethodsetsofSand*SbothincludepromotedmethodswithreceiverTor*T.Afielddeclarationmaybefollowedbyanoptionalstringliteraltag,whichbecomesanattributeforallthefieldsinthecorrespondingfielddeclaration.Thetagsaremadevisiblethroughareflectioninterfaceandtakepartintypeidentityforstructsbutareotherwiseignored.AstructcorrespondingtotheTimeStampprotocolbuffer.Thetagstringsdefinetheprotocolbufferfieldnumbers.struct{microsecuint64field1serverIP6uint64field2processstringfield3}PointertypesApointertypedenotesthesetofallpointerstovariablesofagiventype,calledthebasetypeofthepointer.Thevalueofanuninitializedpointerisnil.PointerType=*BaseType.BaseType=Type.*Point*[4]intFunctiontypesAfunctiontypedenotesthesetofallfunctionswiththesameparameterandresulttypes.Thevalueofanuninitializedvariableoffunctiontypeisnil.FunctionType=funcSignature.Signature=Parameters[Result].Result=Parameters|Type.Parameters=([ParameterList[,]]).ParameterList=ParameterDecl{,ParameterDecl}.ParameterDecl=[IdentifierList][...]Type.Withinalistofparametersorresults,thenames(IdentifierList)musteitherallbepresentorallbeabsent.Ifpresent,eachnamestandsforoneitem(parameterorresult)ofthespecifiedtypeandallnon-blanknamesinthesignaturemustbeunique.Ifabsent,eachtypestandsforoneitemofthattype.Parameterandresultlistsarealwaysparenthesizedexceptthatifthereisexactlyoneunnamedresultitmaybewrittenasanunparenthesizedtype.Thefinalparameterinafunctionsignaturemayhaveatypeprefixedwith....Afunctionwithsuchaparameteriscalledvariadicandmaybeinvokedwithzeroormoreargumentsforthatparameter.func()func(xint)intfunc(a,_int,zfloat32)boolfunc(a,bint,zfloat32)(bool)func(prefixstring,values...int)func(a,bint,zfloat64,opt...interface{})(successbool)func(int,int,float64)(float64,*[]int)func(nint)func(p*T)InterfacetypesAninterfacetypespecifiesamethodsetcalleditsinterface.Avariableofinterfacetypecanstoreavalueofanytypewithamethodsetthatisanysupersetoftheinterface.Suchatypeissaidtoimplementtheinterface.Thevalueofanuninitializedvariableofinterfacetypeisnil.InterfaceType=interface{{MethodSpec;}}.MethodSpec=MethodNameSignature|InterfaceTypeName.MethodName=identifier.InterfaceTypeName=TypeName.Aswithallmethodsets,inaninterfacetype,eachmethodmusthaveauniquename.AsimpleFileinterfaceinterface{Read(bBuffer)boolWrite(bBuffer)boolClose()}Morethanonetypemayimplementaninterface.Forinstance,iftwotypesS1andS2havethemethodsetfunc(pT)Read(bBuffer)bool{return…}func(pT)Write(bBuffer)bool{return…}func(pT)Close(){…}(whereTstandsforeitherS1orS2)thentheFileinterfaceisimplementedbybothS1andS2,regardlessofwhatothermethodsS1andS2mayhaveorshare.Atypeimplementsanyinterfacecomprisinganysubsetofitsmethodsandmaythereforeimplementseveraldistinctinterfaces.Forinstance,alltypesimplementtheemptyinterfaceinterface{}Similarly,considerthisinterfacespecification,whichappearswithinatypedeclarationtodefineaninterfacecalledLocktypeLockinterface{Lock()Unlock()}IfS1andS2alsoimplementfunc(pT)Lock(){…}func(pT)Unlock(){…}theyimplementtheLockinterfaceaswellastheFileinterface.AninterfacemayuseaninterfacetypenameTinplaceofamethodspecification.Theeffect,calledembeddinganinterface,isequivalenttoenumeratingthemethodsofTexplicitlyintheinterface.typeReadWriteinterface{Read(bBuffer)boolWrite(bBuffer)bool}typeFileinterface{ReadWritesameasenumeratingthemethodsinReadWriteLocksameasenumeratingthemethodsinLockClose()}AninterfacetypeTmaynotembeditselforanyinterfacetypethatembedsT,recursively.illegalBadcannotembeditselftypeBadinterface{Bad}illegalBad1cannotembeditselfusingBad2typeBad1interface{Bad2}typeBad2interface{Bad1}MaptypesAmapisanunorderedgroupofelementsofonetype,calledtheelementtype,indexedbyasetofuniquekeysofanothertype,calledthekeytype.Thevalueofanuninitializedmapisnil.MapType=map[KeyType]ElementType.KeyType=Type.Thecomparisonoperators==and!=mustbefullydefinedforoperandsofthekeytype;thusthekeytypemustnotbeafunction,map,orslice.Ifthekeytypeisaninterfacetype,thesecomparisonoperatorsmustbedefinedforthedynamickeyvalues;failurewillcausearun-timepanic.map[string]intmap[*T]struct{x,yfloat64}map[string]interface{}Thenumberofmapelementsiscalleditslength.Foramapm,itcanbediscoveredusingthebuilt-infunctionlenandmaychangeduringexecution.Elementsmaybeaddedduringexecutionusingassignmentsandretrievedwithindexexpressions;theymayberemovedwiththedeletebuilt-infunction.Anew,emptymapvalueismadeusingthebuilt-infunctionmake,whichtakesthemaptypeandanoptionalcapacityhintasargumentsmake(map[string]int)make(map[string]int,100)Theinitialcapacitydoesnotbounditssizemapsgrowtoaccommodatethenumberofitemsstoredinthem,withtheexceptionofnilmaps.Anilmapisequivalenttoanemptymapexceptthatnoelementsmaybeadded.ChanneltypesAchannelprovidesamechanismfortwoconcurrentlyexecutingfunctionstosynchronizeexecutionandcommunicatebypassingavalueofaspecifiedelementtype.Thevalueofanuninitializedchannelisnil.ChannelType=(chan[<-]|<-chan)ElementType.The<-operatorspecifiesthechanneldirection,sendorreceive.Ifnodirectionisgiven,thechannelisbi-directional.Achannelmaybeconstrainedonlytosendoronlytoreceivebyconversionorassignment.chanTcanbeusedtosendandreceivevaluesoftypeTchan<-float64canonlybeusedtosendfloat64s<-chanintcanonlybeusedtoreceiveintsThe<-operatorassociateswiththeleftmostchanpossiblechan<-chanintsameaschan<-(chanint)chan<-<-chanintsameaschan<-(<-chanint)<-chan<-chanintsameas<-chan(<-chanint)chan(<-chanint)Anew,initializedchannelvaluecanbemadeusingthebuilt-infunctionmake,whichtakesthechanneltypeandanoptionalcapacityasargumentsmake(chanint,100)Thecapacity,innumberofelements,setsthesizeofthebufferinthechannel.Ifthecapacityisgreaterthanzero,thechannelisasynchronouscommunicationoperationssucceedwithoutblockingifthebufferisnotfull(sends)ornotempty(receives),andelementsarereceivedintheordertheyaresent.Ifthecapacityiszeroorabsent,thecommunicationsucceedsonlywhenbothasenderandreceiverareready.Anilchannelisneverreadyforcommunication.Achannelmaybeclosedwiththebuilt-infunctionclose;themulti-valuedassignmentformofthereceiveoperatortestswhetherachannelhasbeenclosed.PropertiesoftypesandvaluesTypeidentityTwotypesareeitheridenticalordifferent.TwonamedtypesareidenticaliftheirtypenamesoriginateinthesameTypeSpec.Anamedandanunnamedtypearealwaysdifferent.Twounnamedtypesareidenticalifthecorrespondingtypeliteralsareidentical,thatis,iftheyhavethesameliteralstructureandcorrespondingcomponentshaveidenticaltypes.IndetailTwoarraytypesareidenticaliftheyhaveidenticalelementtypesandthesamearraylength.Twoslicetypesareidenticaliftheyhaveidenticalelementtypes.Twostructtypesareidenticaliftheyhavethesamesequenceoffields,andifcorrespondingfieldshavethesamenames,andidenticaltypes,andidenticaltags.Twoanonymousfieldsareconsideredtohavethesamename.Lower-casefieldnamesfromdifferentpackagesarealwaysdifferent.Twopointertypesareidenticaliftheyhaveidenticalbasetypes.Twofunctiontypesareidenticaliftheyhavethesamenumberofparametersandresultvalues,correspondingparameterandresulttypesareidentical,andeitherbothfunctionsarevariadicorneitheris.Parameterandresultnamesarenotrequiredtomatch.Twointerfacetypesareidenticaliftheyhavethesamesetofmethodswiththesamenamesandidenticalfunctiontypes.Lower-casemethodnamesfromdifferentpackagesarealwaysdifferent.Theorderofthemethodsisirrelevant.Twomaptypesareidenticaliftheyhaveidenticalkeyandvaluetypes.Twochanneltypesareidenticaliftheyhaveidenticalvaluetypesandthesamedirection.Giventhedeclarationstype(T0[]stringT1[]stringT2struct{a,bint}T3struct{a,cint}T4func(int,float64)*T0T5func(xint,yfloat64)*[]string)thesetypesareidenticalT0andT0[]intand[]intstruct{a,b*T5}andstruct{a,b*T5}func(xint,yfloat64)*[]stringandfunc(int,float64)(result*[]string)T0andT1aredifferentbecausetheyarenamedtypeswithdistinctdeclarations;func(int,float64)*T0andfunc(xint,yfloat64)*[]stringaredifferentbecauseT0isdifferentfrom[]string.AssignabilityAvaluexisassignabletoavariableoftypeT(xisassignabletoT)inanyofthesecasesxstypeisidenticaltoT.xstypeVandThaveidenticalunderlyingtypesandatleastoneofVorTisnotanamedtype.TisaninterfacetypeandximplementsT.xisabidirectionalchannelvalue,Tisachanneltype,xstypeVandThaveidenticalelementtypes,andatleastoneofVorTisnotanamedtype.xisthepredeclaredidentifiernilandTisapointer,function,slice,map,channel,orinterfacetype.xisanuntypedconstantrepresentablebyavalueoftypeT.BlocksAblockisapossiblyemptysequenceofdeclarationsandstatementswithinmatchingbracebrackets.Block={StatementList}.StatementList={Statement;}.Inadditiontoexplicitblocksinthesourcecode,thereareimplicitblocksTheuniverseblockencompassesallGosourcetext.EachpackagehasapackageblockcontainingallGosourcetextforthatpackage.EachfilehasafileblockcontainingallGosourcetextinthatfile.Eachif,for,andswitchstatementisconsideredtobeinitsownimplicitblock.Eachclauseinaswitchorselectstatementactsasanimplicitblock.Blocksnestandinfluencescoping.DeclarationsandscopeAdeclarationbindsanon-blankidentifiertoaconstant,type,variable,function,label,orpackage.Everyidentifierinaprogrammustbedeclared.Noidentifiermaybedeclaredtwiceinthesameblock,andnoidentifiermaybedeclaredinboththefileandpackageblock.Theblankidentifiermaybeusedlikeanyotheridentifierinadeclaration,butitdoesnotintroduceabindingandthusisnotdeclared.Declaration=ConstDecl|TypeDecl|VarDecl.TopLevelDecl=Declaration|FunctionDecl|MethodDecl.Thescopeofadeclaredidentifieristheextentofsourcetextinwhichtheidentifierdenotesthespecifiedconstant,type,variable,function,label,orpackage.GoislexicallyscopedusingblocksThescopeofapredeclaredidentifieristheuniverseblock.Thescopeofanidentifierdenotingaconstant,type,variable,orfunction(butnotmethod)declaredattoplevel(outsideanyfunction)isthepackageblock.Thescopeofthepackagenameofanimportedpackageisthefileblockofthefilecontainingtheimportdeclaration.Thescopeofanidentifierdenotingamethodreceiver,functionparameter,orresultvariableisthefunctionbody.ThescopeofaconstantorvariableidentifierdeclaredinsideafunctionbeginsattheendoftheConstSpecorVarSpec(ShortVarDeclforshortvariabledeclarations)andendsattheendoftheinnermostcontainingblock.ThescopeofatypeidentifierdeclaredinsideafunctionbeginsattheidentifierintheTypeSpecandendsattheendoftheinnermostcontainingblock.Anidentifierdeclaredinablockmayberedeclaredinaninnerblock.Whiletheidentifieroftheinnerdeclarationisinscope,itdenotestheentitydeclaredbytheinnerdeclaration.Thepackageclauseisnotadeclaration;thepackagenamedoesnotappearinanyscope.Itspurposeistoidentifythefilesbelongingtothesamepackageandtospecifythedefaultpackagenameforimportdeclarations.LabelscopesLabelsaredeclaredbylabeledstatementsandareusedinthebreak,continue,andgotostatements.Itisillegaltodefinealabelthatisneverused.Incontrasttootheridentifiers,labelsarenotblockscopedanddonotconflictwithidentifiersthatarenotlabels.Thescopeofalabelisthebodyofthefunctioninwhichitisdeclaredandexcludesthebodyofanynestedfunction.BlankidentifierTheblankidentifierisrepresentedbytheunderscorecharacter_.Itservesasananonymousplaceholderinsteadofaregular(non-blank)identifierandhasspecialmeaningindeclarations,asanoperand,andinassignments.PredeclaredidentifiersThefollowingidentifiersareimplicitlydeclaredintheuniverseblockTypesboolbytecomplex64complex128errorfloat32float64intint8int16int32int64runestringuintuint8uint16uint32uint64uintptrConstantstruefalseiotaZerovaluenilFunctionsappendcapclosecomplexcopydeleteimaglenmakenewpanicprintprintlnrealrecoverExportedidentifiersAnidentifiermaybeexportedtopermitaccesstoitfromanotherpackage.AnidentifierisexportedifboththefirstcharacteroftheidentifiersnameisaUnicodeuppercaseletter(UnicodeclassLu);andtheidentifierisdeclaredinthepackageblockoritisafieldnameormethodname.Allotheridentifiersarenotexported.UniquenessofidentifiersGivenasetofidentifiers,anidentifieriscalleduniqueifitisdifferentfromeveryotherintheset.Twoidentifiersaredifferentiftheyarespelleddifferently,oriftheyappearindifferentpackagesandarenotexported.Otherwise,theyarethesame.ConstantdeclarationsAconstantdeclarationbindsalistofidentifiers(thenamesoftheconstants)tothevaluesofalistofconstantexpressions.Thenumberofidentifiersmustbeequaltothenumberofexpressions,andthenthidentifierontheleftisboundtothevalueofthenthexpressionontheright.ConstDecl=const(ConstSpec|({ConstSpec;})).ConstSpec=IdentifierList[[Type]=ExpressionList].IdentifierList=identifier{,identifier}.ExpressionList=Expression{,Expression}.Ifthetypeispresent,allconstantstakethetypespecified,andtheexpressionsmustbeassignabletothattype.Ifthetypeisomitted,theconstantstaketheindividualtypesofthecorrespondingexpressions.Iftheexpressionvaluesareuntypedconstants,thedeclaredconstantsremainuntypedandtheconstantidentifiersdenotetheconstantvalues.Forinstance,iftheexpressionisafloating-pointliteral,theconstantidentifierdenotesafloating-pointconstant,eveniftheliteralsfractionalpartiszero.constPifloat64=3.14159265358979323846constzero=0.0untypedfloating-pointconstantconst(sizeint64=1024eof=-1untypedintegerconstant)consta,b,c=3,4,fooa=3,b=4,c=foo,untypedintegerandstringconstantsconstu,vfloat32=0,3u=0.0,v=3.0Withinaparenthesizedconstdeclarationlisttheexpressionlistmaybeomittedfromanybutthefirstdeclaration.Suchanemptylistisequivalenttothetextualsubstitutionofthefirstprecedingnon-emptyexpressionlistanditstypeifany.Omittingthelistofexpressionsisthereforeequivalenttorepeatingthepreviouslist.Thenumberofidentifiersmustbeequaltothenumberofexpressionsinthepreviouslist.Togetherwiththeiotaconstantgeneratorthismechanismpermitslight-weightdeclarationofsequentialvaluesconst(Sunday=iotaMondayTuesdayWednesdayThursdayFridayPartydaynumberOfDaysthisconstantisnotexported)IotaWithinaconstantdeclaration,thepredeclaredidentifieriotarepresentssuccessiveuntypedintegerconstants.Itisresetto0wheneverthereservedwordconstappearsinthesourceandincrementsaftereachConstSpec.Itcanbeusedtoconstructasetofrelatedconstantsconst(iotaisresetto0c0=iotac0==0c1=iotac1==1c2=iotac2==2)const(a=1<<iotaa==1(iotahasbeenreset)b=1<<iotab==2c=1<<iotac==4)const(u=iota*42u==0(untypedintegerconstant)vfloat64=iota*42v==42.0(float64constant)w=iota*42w==84(untypedintegerconstant))constx=iotax==0(iotahasbeenreset)consty=iotay==0(iotahasbeenreset)WithinanExpressionList,thevalueofeachiotaisthesamebecauseitisonlyincrementedaftereachConstSpecconst(bit0,mask0=1<<iota,1<<iota-1bit0==1,mask0==0bit1,mask1bit1==2,mask1==1_,_skipsiota==2bit3,mask3bit3==8,mask3==7)Thislastexampleexploitstheimplicitrepetitionofthelastnon-emptyexpressionlist.TypedeclarationsAtypedeclarationbindsanidentifier,thetypename,toanewtypethathasthesameunderlyingtypeasanexistingtype.Thenewtypeisdifferentfromtheexistingtype.TypeDecl=type(TypeSpec|({TypeSpec;})).TypeSpec=identifierType.typeIntArray[16]inttype(Pointstruct{x,yfloat64}PolarPoint)typeTreeNodestruct{left,right*TreeNodevalue*Comparable}typeBlockinterface{BlockSize()intEncrypt(src,dst[]byte)Decrypt(src,dst[]byte)}Thedeclaredtypedoesnotinheritanymethodsboundtotheexistingtype,butthemethodsetofaninterfacetypeorofelementsofacompositetyperemainsunchangedAMutexisadatatypewithtwomethods,LockandUnlock.typeMutexstruct{*Mutexfields*}func(m*Mutex)Lock(){*Lockimplementation*}func(m*Mutex)Unlock(){*Unlockimplementation*}NewMutexhasthesamecompositionasMutexbutitsmethodsetisempty.typeNewMutexMutexThemethodsetofthebasetypeofPtrMutexremainsunchanged,butthemethodsetofPtrMutexisempty.typePtrMutex*MutexThemethodsetof*PrintableMutexcontainsthemethodsLockandUnlockboundtoitsanonymousfieldMutex.typePrintableMutexstruct{Mutex}MyBlockisaninterfacetypethathasthesamemethodsetasBlock.typeMyBlockBlockAtypedeclarationmaybeusedtodefineadifferentboolean,numeric,orstringtypeandattachmethodstoittypeTimeZoneintconst(ESTTimeZone=-(5+iota)CSTMSTPST)func(tzTimeZone)String()string{returnfmt.Sprintf(GMT+%dh,tz)}VariabledeclarationsAvariabledeclarationcreatesavariable,bindsanidentifiertoitandgivesitatypeandoptionallyaninitialvalue.VarDecl=var(VarSpec|({VarSpec;})).VarSpec=IdentifierList(Type[=ExpressionList]|=ExpressionList).variintvarU,V,Wfloat64vark=0varx,yfloat32=-1,-2var(iintu,v,s=2.0,3.0,bar)varre,im=complexSqrt(-1)var_,found=entries[name]maplookup;onlyinterestedinfoundIfalistofexpressionsisgiven,thevariablesareinitializedbyassigningtheexpressionstothevariablesinorder;allexpressionsmustbeconsumedandallvariablesinitializedfromthem.Otherwise,eachvariableisinitializedtoitszerovalue.Ifthetypeispresent,eachvariableisgiventhattype.Otherwise,thetypesarededucedfromtheassignmentoftheexpressionlist.Ifthetypeisabsentandthecorrespondingexpressionevaluatestoanuntypedconstant,thetypeofthedeclaredvariableisasdescribedin§Assignments.ImplementationrestrictionAcompilermaymakeitillegaltodeclareavariableinsideafunctionbodyifthevariableisneverused.ShortvariabledeclarationsAshortvariabledeclarationusesthesyntaxShortVarDecl=IdentifierList=ExpressionList.ItisshorthandforaregularvariabledeclarationwithinitializerexpressionsbutnotypesvarIdentifierList=ExpressionList.i,j=0,10f=func()int{return7}ch=make(chanint)r,w=os.Pipe(fd)os.Pipe()returnstwovalues_,y,_=coord(p)coord()returnsthreevalues;onlyinterestedinycoordinateUnlikeregularvariabledeclarations,ashortvariabledeclarationmayredeclarevariablesprovidedtheywereoriginallydeclaredearlierinthesameblockwiththesametype,andatleastoneofthenon-blankvariablesisnew.Asaconsequence,redeclarationcanonlyappearinamulti-variableshortdeclaration.Redeclarationdoesnotintroduceanewvariable;itjustassignsanewvaluetotheoriginal.field1,offset=nextField(str,0)field2,offset=nextField(str,offset)redeclaresoffseta,a=1,2illegaldoubledeclarationofaornonewvariableifawasdeclaredelsewhereShortvariabledeclarationsmayappearonlyinsidefunctions.Insomecontextssuchastheinitializersforif,for,orswitchstatements,theycanbeusedtodeclarelocaltemporaryvariables.FunctiondeclarationsAfunctiondeclarationbindsanidentifier,thefunctionname,toafunction.FunctionDecl=funcFunctionName(Function|Signature).FunctionName=identifier.Function=SignatureFunctionBody.FunctionBody=Block.Ifthefunctionssignaturedeclaresresultparameters,thefunctionbodysstatementlistmustendinaterminatingstatement.funcfindMarker(c<-chanint)int{fori=rangec{ifx=<-c;isMarker(x){returnx}}invalidmissingreturnstatement.}Afunctiondeclarationmayomitthebody.SuchadeclarationprovidesthesignatureforafunctionimplementedoutsideGo,suchasanassemblyroutine.funcmin(xint,yint)int{ifx<y{returnx}returny}funcflushICache(begin,enduintptr)implementedexternallyMethoddeclarationsAmethodisafunctionwithareceiver.Amethoddeclarationbindsanidentifier,themethodname,toamethod,andassociatesthemethodwiththereceiversbasetype.MethodDecl=funcReceiverMethodName(Function|Signature).Receiver=([identifier][*]BaseTypeName).BaseTypeName=identifier.ThereceivertypemustbeoftheformTor*TwhereTisatypename.ThetypedenotedbyTiscalledthereceiverbasetype;itmustnotbeapointerorinterfacetypeanditmustbedeclaredinthesamepackageasthemethod.Themethodissaidtobeboundtothebasetypeandthemethodnameisvisibleonlywithinselectorsforthattype.Anon-blankreceiveridentifiermustbeuniqueinthemethodsignature.Ifthereceiversvalueisnotreferencedinsidethebodyofthemethod,itsidentifiermaybeomittedinthedeclaration.Thesameappliesingeneraltoparametersoffunctionsandmethods.Forabasetype,thenon-blanknamesofmethodsboundtoitmustbeunique.Ifthebasetypeisastructtype,thenon-blankmethodandfieldnamesmustbedistinct.GiventypePoint,thedeclarationsfunc(p*Point)Length()float64{returnmath.Sqrt(p.x*p.x+p.y*p.y)}func(p*Point)Scale(factorfloat64){p.x*=factorp.y*=factor}bindthemethodsLengthandScale,withreceivertype*Point,tothebasetypePoint.Thetypeofamethodisthetypeofafunctionwiththereceiverasfirstargument.Forinstance,themethodScalehastypefunc(p*Point,factorfloat64)However,afunctiondeclaredthiswayisnotamethod.ExpressionsAnexpressionspecifiesthecomputationofavaluebyapplyingoperatorsandfunctionstooperands.OperandsOperandsdenotetheelementaryvaluesinanexpression.Anoperandmaybealiteral,a(possiblyqualified)non-blankidentifierdenotingaconstant,variable,orfunction,amethodexpressionyieldingafunction,oraparenthesizedexpression.Theblankidentifiermayappearasanoperandonlyontheleft-handsideofanassignment.Operand=Literal|OperandName|MethodExpr|(Expression).Literal=BasicLit|CompositeLit|FunctionLit.BasicLit=int_lit|float_lit|imaginary_lit|rune_lit|string_lit.OperandName=identifier|QualifiedIdent.QualifiedidentifiersAqualifiedidentifierisanidentifierqualifiedwithapackagenameprefix.Boththepackagenameandtheidentifiermustnotbeblank.QualifiedIdent=PackageName.identifier.Aqualifiedidentifieraccessesanidentifierinadifferentpackage,whichmustbeimported.Theidentifiermustbeexportedanddeclaredinthepackageblockofthatpackage.math.SindenotestheSinfunctioninpackagemathCompositeliteralsCompositeliteralsconstructvaluesforstructs,arrays,slices,andmapsandcreateanewvalueeachtimetheyareevaluated.Theyconsistofthetypeofthevaluefollowedbyabrace-boundlistofcompositeelements.Anelementmaybeasingleexpressionorakey-valuepair.CompositeLit=LiteralTypeLiteralValue.LiteralType=StructType|ArrayType|[...]ElementType|SliceType|MapType|TypeName.LiteralValue={[ElementList[,]]}.ElementList=Element{,Element}.Element=[Key]Value.Key=FieldName|ElementIndex.FieldName=identifier.ElementIndex=Expression.Value=Expression|LiteralValue.TheLiteralTypemustbeastruct,array,slice,ormaptype(thegrammarenforcesthisconstraintexceptwhenthetypeisgivenasaTypeName).Thetypesoftheexpressionsmustbeassignabletotherespectivefield,element,andkeytypesoftheLiteralType;thereisnoadditionalconversion.Thekeyisinterpretedasafieldnameforstructliterals,anindexforarrayandsliceliterals,andakeyformapliterals.Formapliterals,allelementsmusthaveakey.Itisanerrortospecifymultipleelementswiththesamefieldnameorconstantkeyvalue.ForstructliteralsthefollowingrulesapplyAkeymustbeafieldnamedeclaredintheLiteralType.Anelementlistthatdoesnotcontainanykeysmustlistanelementforeachstructfieldintheorderinwhichthefieldsaredeclared.Ifanyelementhasakey,everyelementmusthaveakey.Anelementlistthatcontainskeysdoesnotneedtohaveanelementforeachstructfield.Omittedfieldsgetthezerovalueforthatfield.Aliteralmayomittheelementlist;suchaliteralevaluatestothezerovalueforitstype.Itisanerrortospecifyanelementforanon-exportedfieldofastructbelongingtoadifferentpackage.GiventhedeclarationstypePoint3Dstruct{x,y,zfloat64}typeLinestruct{p,qPoint3D}onemaywriteorigin=Point3D{}zerovalueforPoint3Dline=Line{origin,Point3D{y-4,z12.3}}zerovalueforline.q.xForarrayandsliceliteralsthefollowingrulesapplyEachelementhasanassociatedintegerindexmarkingitspositioninthearray.Anelementwithakeyusesthekeyasitsindex;thekeymustbeaconstantintegerexpression.Anelementwithoutakeyusesthepreviouselementsindexplusone.Ifthefirstelementhasnokey,itsindexiszero.Takingtheaddressofacompositeliteralgeneratesapointertoauniqueinstanceoftheliteralsvalue.varpointer*Point3D=&Point3D{y1000}ThelengthofanarrayliteralisthelengthspecifiedintheLiteralType.Iffewerelementsthanthelengthareprovidedintheliteral,themissingelementsaresettothezerovalueforthearrayelementtype.Itisanerrortoprovideelementswithindexvaluesoutsidetheindexrangeofthearray.Thenotation...specifiesanarraylengthequaltothemaximumelementindexplusone.buffer=[10]string{}len(buffer)==10intSet=[6]int{1,2,3,5}len(intSet)==6days=[...]string{Sat,Sun}len(days)==2Asliceliteraldescribestheentireunderlyingarrayliteral.Thus,thelengthandcapacityofasliceliteralarethemaximumelementindexplusone.Asliceliteralhastheform[]T{x1,x2,…xn}andisshorthandforasliceoperationappliedtoanarraytmp=[n]T{x1,x2,…xn}tmp[0n]Withinacompositeliteralofarray,slice,ormaptypeT,elementsthatarethemselvescompositeliteralsmayelidetherespectiveliteraltypeifitisidenticaltotheelementtypeofT.Similarly,elementsthatareaddressesofcompositeliteralsmayelidethe&Twhentheelementtypeis*T.[...]Point{{1.5,-3.5},{0,0}}sameas[...]Point{Point{1.5,-3.5},Point{0,0}}[][]int{{1,2,3},{4,5}}sameas[][]int{[]int{1,2,3},[]int{4,5}}[...]*Point{{1.5,-3.5},{0,0}}sameas[...]*Point{&Point{1.5,-3.5},&Point{0,0}}AparsingambiguityariseswhenacompositeliteralusingtheTypeNameformoftheLiteralTypeappearsbetweenthekeywordandtheopeningbraceoftheblockofanif,for,orswitchstatement,becausethebracessurroundingtheexpressionsintheliteralareconfusedwiththoseintroducingtheblockofstatements.Toresolvetheambiguityinthisrarecase,thecompositeliteralmustappearwithinparentheses.ifx==(T{a,b,c}[i]){…}if(x==T{a,b,c}[i]){…}Examplesofvalidarray,slice,andmapliteralslistofprimenumbersprimes=[]int{2,3,5,7,9,2147483647}vowels[ch]istrueifchisavowelvowels=[128]bool{atrue,etrue,itrue,otrue,utrue,ytrue}thearray[10]float32{-1,0,0,0,-0.1,-0.1,0,0,0,-1}filter=[10]float32{-1,4-0.1,-0.1,9-1}frequenciesinHzforequal-temperedscale(A4=440Hz)noteFrequency=map[string]float32{C016.35,D018.35,E020.60,F021.83,G024.50,A027.50,B030.87,}FunctionliteralsAfunctionliteralrepresentsananonymousfunction.FunctionLit=funcFunction.func(a,bint,zfloat64)bool{returna*b<int(z)}Afunctionliteralcanbeassignedtoavariableorinvokeddirectly.f=func(x,yint)int{returnx+y}func(chchanint){ch<-ACK}(replyChan)Functionliteralsareclosurestheymayrefertovariablesdefinedinasurroundingfunction.Thosevariablesarethensharedbetweenthesurroundingfunctionandthefunctionliteral,andtheysurviveaslongastheyareaccessible.PrimaryexpressionsPrimaryexpressionsaretheoperandsforunaryandbinaryexpressions.PrimaryExpr=Operand|Conversion|BuiltinCall|PrimaryExprSelector|PrimaryExprIndex|PrimaryExprSlice|PrimaryExprTypeAssertion|PrimaryExprCall.Selector=.identifier.Index=[Expression].Slice=[([Expression][Expression])|([Expression]ExpressionExpression)].TypeAssertion=.(Type).Call=([ArgumentList[,]]).ArgumentList=ExpressionList[...].x2(s+.txt)f(3.1415,true)Point{1,2}m[foo]s[ij+1]obj.colorf.p[i].x()SelectorsForaprimaryexpressionxthatisnotapackagename,theselectorexpressionx.fdenotesthefieldormethodfofthevaluex(orsometimes*x;seebelow).Theidentifierfiscalledthe(fieldormethod)selector;itmustnotbetheblankidentifier.Thetypeoftheselectorexpressionisthetypeoff.Ifxisapackagename,seethesectiononqualifiedidentifiers.AselectorfmaydenoteafieldormethodfofatypeT,oritmayrefertoafieldormethodfofanestedanonymousfieldofT.ThenumberofanonymousfieldstraversedtoreachfiscalleditsdepthinT.ThedepthofafieldormethodfdeclaredinTiszero.ThedepthofafieldormethodfdeclaredinananonymousfieldAinTisthedepthoffinAplusone.ThefollowingrulesapplytoselectorsForavaluexoftypeTor*TwhereTisnotaninterfacetype,x.fdenotesthefieldormethodattheshallowestdepthinTwherethereissuchanf.Ifthereisnotexactlyonefwithshallowestdepth,theselectorexpressionisillegal.ForavariablexoftypeIwhereIisaninterfacetype,x.fdenotestheactualmethodwithnamefofthevalueassignedtox.IfthereisnomethodwithnamefinthemethodsetofI,theselectorexpressionisillegal.Inallothercases,x.fisillegal.Ifxisofpointertypeandhasthevaluenilandx.fdenotesastructfield,assigningtoorevaluatingx.fcausesarun-timepanic.Ifxisofinterfacetypeandhasthevaluenil,callingorevaluatingthemethodx.fcausesarun-timepanic.Selectorsautomaticallydereferencepointerstostructs.Ifxisapointertoastruct,x.yisshorthandfor(*x).y;ifthefieldyisalsoapointertoastruct,x.y.zisshorthandfor(*(*x).y).z,andsoon.Ifxcontainsananonymousfieldoftype*A,whereAisalsoastructtype,x.fisshorthandfor(*x.A).f.Forexample,giventhedeclarationstypeT0struct{xint}func(recv*T0)M0()typeT1struct{yint}func(recvT1)M1()typeT2struct{zintT1*T0}func(recv*T2)M2()varp*T2withp!=nilandp.T0!=nilonemaywritep.z(*p).zp.y((*p).T1).yp.x(*(*p).T0).xp.M2()(*p).M2()p.M1()((*p).T1).M1()p.M0()((*p).T0).M0()IndexexpressionsAprimaryexpressionoftheforma[x]denotestheelementofthearray,pointertoarray,slice,stringormapaindexedbyx.Thevaluexiscalledtheindexormapkey,respectively.ThefollowingrulesapplyIfaisnotamaptheindexxmustbeofintegertypeoruntyped;itisinrangeif0<=x<len(a),otherwiseitisoutofrangeaconstantindexmustbenon-negativeandrepresentablebyavalueoftypeintForaofarraytypeAaconstantindexmustbeinrangeifxisoutofrangeatruntime,arun-timepanicoccursa[x]isthearrayelementatindexxandthetypeofa[x]istheelementtypeofAForaofpointertoarraytypea[x]isshorthandfor(*a)[x]ForaofslicetypeSifxisoutofrangeatruntime,arun-timepanicoccursa[x]isthesliceelementatindexxandthetypeofa[x]istheelementtypeofSForaofstringtypeaconstantindexmustbeinrangeifthestringaisalsoconstantifxisoutofrangeatruntime,arun-timepanicoccursa[x]isthenon-constantbytevalueatindexxandthetypeofa[x]isbytea[x]maynotbeassignedtoForaofmaptypeMxstypemustbeassignabletothekeytypeofMifthemapcontainsanentrywithkeyx,a[x]isthemapvaluewithkeyxandthetypeofa[x]isthevaluetypeofMifthemapisnilordoesnotcontainsuchanentry,a[x]isthezerovalueforthevaluetypeofMOtherwisea[x]isillegal.Anindexexpressiononamapaoftypemap[K]Vmaybeusedinanassignmentorinitializationofthespecialformv,ok=a[x]v,ok=a[x]varv,ok=a[x]wheretheresultoftheindexexpressionisapairofvalueswithtypes(V,bool).Inthisform,thevalueofokistrueifthekeyxispresentinthemap,andfalseotherwise.Thevalueofvisthevaluea[x]asinthesingle-resultform.Assigningtoanelementofanilmapcausesarun-timepanic.SliceexpressionsSliceexpressionsconstructasubstringorslicefromastring,array,pointertoarray,orslice.Therearetwovariantsasimpleformthatspecifiesalowandhighbound,andafullformthatalsospecifiesaboundonthecapacity.SimplesliceexpressionsForastring,array,pointertoarray,orslicea,theprimaryexpressiona[lowhigh]constructsasubstringorslice.Theindiceslowandhighselectwhichelementsofoperandaappearintheresult.Theresulthasindicesstartingat0andlengthequaltohigh-low.Afterslicingthearrayaa=[5]int{1,2,3,4,5}s=a[14]thesliceshastype[]int,length3,capacity4,andelementss[0]==2s[1]==3s[2]==4Forconvenience,anyoftheindicesmaybeomitted.Amissinglowindexdefaultstozero;amissinghighindexdefaultstothelengthoftheslicedoperanda[2]sameasa[2len(a)]a[3]sameasa[03]a[]sameasa[0len(a)]Ifaisapointertoanarray,a[lowhigh]isshorthandfor(*a)[lowhigh].Forarraysorstrings,theindicesareinrangeif0<=low<=high<=len(a),otherwisetheyareoutofrange.Forslices,theupperindexboundistheslicecapacitycap(a)ratherthanthelength.Aconstantindexmustbenon-negativeandrepresentablebyavalueoftypeint.Ifbothindicesareconstant,theymustsatisfylow<=high.Iftheindicesareoutofrangeatruntime,arun-timepanicoccurs.Exceptforuntypedstrings,iftheslicedoperandisastringorslice,theresultofthesliceoperationisanon-constantvalueofthesametypeastheoperand.Foruntypedstringoperandstheresultisanon-constantvalueoftypestring.Iftheslicedoperandisanarray,itmustbeaddressableandtheresultofthesliceoperationisaslicewiththesameelementtypeasthearray.Iftheslicedoperandofavalidsliceexpressionisanilslice,theresultisanilslice.Otherwise,theresultsharesitsunderlyingarraywiththeoperand.FullsliceexpressionsForanarray,pointertoarray,orslicea(butnotastring),theprimaryexpressiona[lowhighmax]constructsasliceofthesametype,andwiththesamelengthandelementsasthesimplesliceexpressiona[lowhigh].Additionally,itcontrolstheresultingslicescapacitybysettingittomax-low.Onlythefirstindexmaybeomitted;itdefaultsto0.Afterslicingthearrayaa=[5]int{1,2,3,4,5}t=a[135]theslicethastype[]int,length2,capacity4,andelementst[0]==2t[1]==3Asforsimplesliceexpressions,ifaisapointertoanarray,a[lowhighmax]isshorthandfor(*a)[lowhighmax].Iftheslicedoperandisanarray,itmustbeaddressable.Theindicesareinrangeif0<=low<=high<=max<=cap(a),otherwisetheyareoutofrange.Aconstantindexmustbenon-negativeandrepresentablebyavalueoftypeint.Ifmultipleindicesareconstant,theconstantsthatarepresentmustbeinrangerelativetoeachother.Iftheindicesareoutofrangeatruntime,arun-timepanicoccurs.TypeassertionsForanexpressionxofinterfacetypeandatypeT,theprimaryexpressionx.(T)assertsthatxisnotnilandthatthevaluestoredinxisoftypeT.Thenotationx.(T)iscalledatypeassertion.Moreprecisely,ifTisnotaninterfacetype,x.(T)assertsthatthedynamictypeofxisidenticaltothetypeT.Inthiscase,Tmustimplementthe(interface)typeofx;otherwisethetypeassertionisinvalidsinceitisnotpossibleforxtostoreavalueoftypeT.IfTisaninterfacetype,x.(T)assertsthatthedynamictypeofximplementstheinterfaceT.Ifthetypeassertionholds,thevalueoftheexpressionisthevaluestoredinxanditstypeisT.Ifthetypeassertionisfalse,arun-timepanicoccurs.Inotherwords,eventhoughthedynamictypeofxisknownonlyatruntime,thetypeofx.(T)isknowntobeTinacorrectprogram.varxinterface{}=7xhasdynamictypeintandvalue7i=x.(int)ihastypeintandvalue7typeIinterface{m()}varyIs=y.(string)illegalstringdoesnotimplementI(missingmethodm)r=y.(io.Reader)rhastypeio.ReaderandymustimplementbothIandio.ReaderIfatypeassertionisusedinanassignmentorinitializationoftheformv,ok=x.(T)v,ok=x.(T)varv,ok=x.(T)theresultoftheassertionisapairofvalueswithtypes(T,bool).Iftheassertionholds,theexpressionreturnsthepair(x.(T),true);otherwise,theexpressionreturns(Z,false)whereZisthezerovaluefortypeT.Norun-timepanicoccursinthiscase.Thetypeassertioninthisconstructthusactslikeafunctioncallreturningavalueandabooleanindicatingsuccess.CallsGivenanexpressionfoffunctiontypeF,f(a1,a2,…an)callsfwithargumentsa1,a2,…an.Exceptforonespecialcase,argumentsmustbesingle-valuedexpressionsassignabletotheparametertypesofFandareevaluatedbeforethefunctioniscalled.ThetypeoftheexpressionistheresulttypeofF.Amethodinvocationissimilarbutthemethoditselfisspecifiedasaselectoruponavalueofthereceivertypeforthemethod.math.Atan2(x,y)functioncallvarpt*Pointpt.Scale(3.5)methodcallwithreceiverptInafunctioncall,thefunctionvalueandargumentsareevaluatedintheusualorder.Aftertheyareevaluated,theparametersofthecallarepassedbyvaluetothefunctionandthecalledfunctionbeginsexecution.Thereturnparametersofthefunctionarepassedbyvaluebacktothecallingfunctionwhenthefunctionreturns.Callinganilfunctionvaluecausesarun-timepanic.Asaspecialcase,ifthereturnvaluesofafunctionormethodgareequalinnumberandindividuallyassignabletotheparametersofanotherfunctionormethodf,thenthecallf(g(parameters_of_g))willinvokefafterbindingthereturnvaluesofgtotheparametersoffinorder.Thecalloffmustcontainnoparametersotherthanthecallofg,andgmusthaveatleastonereturnvalue.Iffhasafinal...parameter,itisassignedthereturnvaluesofgthatremainafterassignmentofregularparameters.funcSplit(sstring,posint)(string,string){returns[0pos],s[pos]}funcJoin(s,tstring)string{returns+t}ifJoin(Split(value,len(value)2))!=value{log.Panic(testfails)}Amethodcallx.m()isvalidifthemethodsetof(thetypeof)xcontainsmandtheargumentlistcanbeassignedtotheparameterlistofm.Ifxisaddressableand&xsmethodsetcontainsm,x.m()isshorthandfor(&x).m()varpPointp.Scale(3.5)Thereisnodistinctmethodtypeandtherearenomethodliterals.Passingargumentsto...parametersIffisvariadicwithfinalparametertype...T,thenwithinthefunctiontheargumentisequivalenttoaparameteroftype[]T.Ateachcalloff,theargumentpassedtothefinalparameterisanewsliceoftype[]Twhosesuccessiveelementsaretheactualarguments,whichallmustbeassignabletothetypeT.Thelengthofthesliceisthereforethenumberofargumentsboundtothefinalparameterandmaydifferforeachcallsite.GiventhefunctionandcallfuncGreeting(prefixstring,who...string)Greeting(hello,Joe,Anna,Eileen)withinGreeting,whowillhavethevalue[]string{Joe,Anna,Eileen}Ifthefinalargumentisassignabletoaslicetype[]T,itmaybepassedunchangedasthevaluefora...Tparameteriftheargumentisfollowedby....Inthiscasenonewsliceiscreated.Giventheslicesandcalls=[]string{James,Jasmine}Greeting(goodbye,s...)withinGreeting,whowillhavethesamevalueasswiththesameunderlyingarray.OperatorsOperatorscombineoperandsintoexpressions.Expression=UnaryExpr|Expressionbinary_opUnaryExpr.UnaryExpr=PrimaryExpr|unary_opUnaryExpr.binary_op=|||&&|rel_op|add_op|mul_op.rel_op===|!=|<|<=|>|>=.add_op=+|-|||^.mul_op=*||%|<<|>>|&|&^.unary_op=+|-|!|^|*|&|<-.Comparisonsarediscussedelsewhere.Forotherbinaryoperators,theoperandtypesmustbeidenticalunlesstheoperationinvolvesshiftsoruntypedconstants.Foroperationsinvolvingconstantsonly,seethesectiononconstantexpressions.Exceptforshiftoperations,ifoneoperandisanuntypedconstantandtheotheroperandisnot,theconstantisconvertedtothetypeoftheotheroperand.Therightoperandinashiftexpressionmusthaveunsignedintegertypeorbeanuntypedconstantthatcanbeconvertedtounsignedintegertype.Iftheleftoperandofanon-constantshiftexpressionisanuntypedconstant,thetypeoftheconstantiswhatitwouldbeiftheshiftexpressionwerereplacedbyitsleftoperandalone.varsuint=33vari=1<<s1hastypeintvarjint32=1<<s1hastypeint32;j==0vark=uint64(1<<s)1hastypeuint64;k==1<<33varmint=1.0<<s1.0hastypeintvarn=1.0<<s!=i1.0hastypeint;n==falseifintsare32bitsinsizevaro=1<<s==2<<s1and2havetypeint;o==trueifintsare32bitsinsizevarp=1<<s==1<<33illegalifintsare32bitsinsize1hastypeint,but1<<33overflowsintvaru=1.0<<sillegal1.0hastypefloat64,cannotshiftvaru1=1.0<<s!=0illegal1.0hastypefloat64,cannotshiftvaru2=1<<s!=1.0illegal1hastypefloat64,cannotshiftvarvfloat32=1<<sillegal1hastypefloat32,cannotshiftvarwint64=1.0<<331.0<<33isaconstantshiftexpressionOperatorprecedenceUnaryoperatorshavethehighestprecedence.Asthe++and--operatorsformstatements,notexpressions,theyfalloutsidetheoperatorhierarchy.Asaconsequence,statement*p++isthesameas(*p)++.Therearefiveprecedencelevelsforbinaryoperators.Multiplicationoperatorsbindstrongest,followedbyadditionoperators,comparisonoperators,&&(logicalAND),andfinally||(logicalOR)PrecedenceOperator5*%<<>>&&^4+-|^3==!=<<=>>=2&&1||Binaryoperatorsofthesameprecedenceassociatefromlefttoright.Forinstance,xy*zisthesameas(xy)*z.+x23+3*x[i]x<=f()^a>>bf()||g()x==y+1&&<-chanPtr>0ArithmeticoperatorsArithmeticoperatorsapplytonumericvaluesandyieldaresultofthesametypeasthefirstoperand.Thefourstandardarithmeticoperators(+,-,*,)applytointeger,floating-point,andcomplextypes;+alsoappliestostrings.Allotherarithmeticoperatorsapplytointegersonly.+sumintegers,floats,complexvalues,strings-differenceintegers,floats,complexvalues*productintegers,floats,complexvaluesquotientintegers,floats,complexvalues%remainderintegers&bitwiseANDintegers|bitwiseORintegers^bitwiseXORintegers&^bitclear(ANDNOT)integers<<leftshiftinteger<<unsignedinteger>>rightshiftinteger>>unsignedintegerStringscanbeconcatenatedusingthe+operatororthe+=assignmentoperators=hi+string(c)s+=andgoodbyeStringadditioncreatesanewstringbyconcatenatingtheoperands.Fortwointegervaluesxandy,theintegerquotientq=xyandremainderr=x%ysatisfythefollowingrelationshipsx=q*y+rand|r|<|y|withxytruncatedtowardszero(truncateddivision).xyxyx%y5312-53-1-25-3-12-5-31-2Asanexceptiontothisrule,ifthedividendxisthemostnegativevaluefortheinttypeofx,thequotientq=x-1isequaltox(andr=0).x,qint8-128int16-32768int32-2147483648int64-9223372036854775808Ifthedivisorisaconstant,itmustnotbezero.Ifthedivisoriszeroatruntime,arun-timepanicoccurs.Ifthedividendisnon-negativeandthedivisorisaconstantpowerof2,thedivisionmaybereplacedbyarightshift,andcomputingtheremaindermaybereplacedbyabitwiseANDoperationxx4x%4x>>2x&3112323-11-2-3-31Theshiftoperatorsshifttheleftoperandbytheshiftcountspecifiedbytherightoperand.Theyimplementarithmeticshiftsiftheleftoperandisasignedintegerandlogicalshiftsifitisanunsignedinteger.Thereisnoupperlimitontheshiftcount.Shiftsbehaveasiftheleftoperandisshiftedntimesby1forashiftcountofn.Asaresult,x<<1isthesameasx*2andx>>1isthesameasx2buttruncatedtowardsnegativeinfinity.Forintegeroperands,theunaryoperators+,-,and^aredefinedasfollows+xis0+x-xnegationis0-x^xbitwisecomplementism^xwithm=allbitssetto1forunsignedxandm=-1forsignedxForfloating-pointandcomplexnumbers,+xisthesameasx,while-xisthenegationofx.Theresultofafloating-pointorcomplexdivisionbyzeroisnotspecifiedbeyondtheIEEE-754standard;whetherarun-timepanicoccursisimplementation-specific.IntegeroverflowForunsignedintegervalues,theoperations+,-,*,and<<arecomputedmodulo2n,wherenisthebitwidthoftheunsignedintegerstype.Looselyspeaking,theseunsignedintegeroperationsdiscardhighbitsuponoverflow,andprogramsmayrelyonwraparound.Forsignedintegers,theoperations+,-,*,and<<maylegallyoverflowandtheresultingvalueexistsandisdeterministicallydefinedbythesignedintegerrepresentation,theoperation,anditsoperands.Noexceptionisraisedasaresultofoverflow.Acompilermaynotoptimizecodeundertheassumptionthatoverflowdoesnotoccur.Forinstance,itmaynotassumethatx<x+1isalwaystrue.ComparisonoperatorsComparisonoperatorscomparetwooperandsandyieldanuntypedbooleanvalue.==equal!=notequal<less<=lessorequal>greater>=greaterorequalInanycomparison,thefirstoperandmustbeassignabletothetypeofthesecondoperand,orviceversa.Theequalityoperators==and!=applytooperandsthatarecomparable.Theorderingoperators<,<=,>,and>=applytooperandsthatareordered.ThesetermsandtheresultofthecomparisonsaredefinedasfollowsBooleanvaluesarecomparable.Twobooleanvaluesareequaliftheyareeitherbothtrueorbothfalse.Integervaluesarecomparableandordered,intheusualway.Floatingpointvaluesarecomparableandordered,asdefinedbytheIEEE-754standard.Complexvaluesarecomparable.Twocomplexvaluesuandvareequalifbothreal(u)==real(v)andimag(u)==imag(v).Stringvaluesarecomparableandordered,lexicallybyte-wise.Pointervaluesarecomparable.Twopointervaluesareequaliftheypointtothesamevariableorifbothhavevaluenil.Pointerstodistinctzero-sizevariablesmayormaynotbeequal.Channelvaluesarecomparable.Twochannelvaluesareequaliftheywerecreatedbythesamecalltomakeorifbothhavevaluenil.Interfacevaluesarecomparable.Twointerfacevaluesareequaliftheyhaveidenticaldynamictypesandequaldynamicvaluesorifbothhavevaluenil.Avaluexofnon-interfacetypeXandavaluetofinterfacetypeTarecomparablewhenvaluesoftypeXarecomparableandXimplementsT.TheyareequaliftsdynamictypeisidenticaltoXandtsdynamicvalueisequaltox.Structvaluesarecomparableifalltheirfieldsarecomparable.Twostructvaluesareequaliftheircorrespondingnon-blankfieldsareequal.Arrayvaluesarecomparableifvaluesofthearrayelementtypearecomparable.Twoarrayvaluesareequaliftheircorrespondingelementsareequal.Acomparisonoftwointerfacevalueswithidenticaldynamictypescausesarun-timepanicifvaluesofthattypearenotcomparable.Thisbehaviorappliesnotonlytodirectinterfacevaluecomparisonsbutalsowhencomparingarraysofinterfacevaluesorstructswithinterface-valuedfields.Slice,map,andfunctionvaluesarenotcomparable.However,asaspecialcase,aslice,map,orfunctionvaluemaybecomparedtothepredeclaredidentifiernil.Comparisonofpointer,channel,andinterfacevaluestonilisalsoallowedandfollowsfromthegeneralrulesabove.constc=3<4cistheuntypedboolconstanttruetypeMyBoolboolvarx,yintvar(Theresultofacomparisonisanuntypedbool.Theusualassignmentrulesapply.b3=x==yb3hastypeboolb4bool=x==yb4hastypeboolb5MyBool=x==yb5hastypeMyBool)LogicaloperatorsLogicaloperatorsapplytobooleanvaluesandyieldaresultofthesametypeastheoperands.Therightoperandisevaluatedconditionally.&&conditionalANDp&&qisifpthenqelsefalse||conditionalORp||qisifpthentrueelseq!NOT!pisnotpAddressoperatorsForanoperandxoftypeT,theaddressoperation&xgeneratesapointeroftype*Ttox.Theoperandmustbeaddressable,thatis,eitheravariable,pointerindirection,orsliceindexingoperation;orafieldselectorofanaddressablestructoperand;oranarrayindexingoperationofanaddressablearray.Asanexceptiontotheaddressabilityrequirement,xmayalsobea(possiblyparenthesized)compositeliteral.Iftheevaluationofxwouldcausearun-timepanic,thentheevaluationof&xdoestoo.Foranoperandxofpointertype*T,thepointerindirection*xdenotesthevalueoftypeTpointedtobyx.Ifxisnil,anattempttoevaluate*xwillcausearun-timepanic.&x&a[f(2)]&Point{2,3}*p*pf(x)varx*int=nil*xcausesarun-timepanic&*xcausesarun-timepanicReceiveoperatorForanoperandchofchanneltype,thevalueofthereceiveoperation<-chisthevaluereceivedfromthechannelch.Thechanneldirectionmustpermitreceiveoperations,andthetypeofthereceiveoperationistheelementtypeofthechannel.Theexpressionblocksuntilavalueisavailable.Receivingfromanilchannelblocksforever.Areceiveoperationonaclosedchannelcanalwaysproceedimmediately,yieldingtheelementtypeszerovalue.v1=<-chv2=<-chf(<-ch)<-strobewaituntilclockpulseanddiscardreceivedvalueAreceiveexpressionusedinanassignmentorinitializationoftheformx,ok=<-chx,ok=<-chvarx,ok=<-chyieldsanadditionalresultoftypeboolreportingwhetherthecommunicationsucceeded.Thevalueofokistrueifthevaluereceivedwasdeliveredbyasuccessfulsendoperationtothechannel,orfalseifitisazerovaluegeneratedbecausethechannelisclosedandempty.MethodexpressionsIfMisinthemethodsetoftypeT,T.MisafunctionthatiscallableasaregularfunctionwiththesameargumentsasMprefixedbyanadditionalargumentthatisthereceiverofthemethod.MethodExpr=ReceiverType.MethodName.ReceiverType=TypeName|(*TypeName)|(ReceiverType).ConsiderastructtypeTwithtwomethods,Mv,whosereceiverisoftypeT,andMp,whosereceiverisoftype*T.typeTstruct{aint}func(tvT)Mv(aint)int{return0}valuereceiverfunc(tp*T)Mp(ffloat32)float32{return1}pointerreceivervartTTheexpressionT.MvyieldsafunctionequivalenttoMvbutwithanexplicitreceiverasitsfirstargument;ithassignaturefunc(tvT,aint)intThatfunctionmaybecallednormallywithanexplicitreceiver,sothesefiveinvocationsareequivalentt.Mv(7)T.Mv(t,7)(T).Mv(t,7)f1=T.Mv;f1(t,7)f2=(T).Mv;f2(t,7)Similarly,theexpression(*T).MpyieldsafunctionvaluerepresentingMpwithsignaturefunc(tp*T,ffloat32)float32Foramethodwithavaluereceiver,onecanderiveafunctionwithanexplicitpointerreceiver,so(*T).MvyieldsafunctionvaluerepresentingMvwithsignaturefunc(tv*T,aint)intSuchafunctionindirectsthroughthereceivertocreateavaluetopassasthereceivertotheunderlyingmethod;themethoddoesnotoverwritethevaluewhoseaddressispassedinthefunctioncall.Thefinalcase,avalue-receiverfunctionforapointer-receivermethod,isillegalbecausepointer-receivermethodsarenotinthemethodsetofthevaluetype.Functionvaluesderivedfrommethodsarecalledwithfunctioncallsyntax;thereceiverisprovidedasthefirstargumenttothecall.Thatis,givenf=T.Mv,fisinvokedasf(t,7)nott.f(7).Toconstructafunctionthatbindsthereceiver,useafunctionliteralormethodvalue.Itislegaltoderiveafunctionvaluefromamethodofaninterfacetype.Theresultingfunctiontakesanexplicitreceiverofthatinterfacetype.MethodvaluesIftheexpressionxhasstatictypeTandMisinthemethodsetoftypeT,x.Miscalledamethodvalue.Themethodvaluex.Misafunctionvaluethatiscallablewiththesameargumentsasamethodcallofx.M.Theexpressionxisevaluatedandsavedduringtheevaluationofthemethodvalue;thesavedcopyisthenusedasthereceiverinanycalls,whichmaybeexecutedlater.ThetypeTmaybeaninterfaceornon-interfacetype.Asinthediscussionofmethodexpressionsabove,considerastructtypeTwithtwomethods,Mv,whosereceiverisoftypeT,andMp,whosereceiverisoftype*T.typeTstruct{aint}func(tvT)Mv(aint)int{return0}valuereceiverfunc(tp*T)Mp(ffloat32)float32{return1}pointerreceivervartTvarpt*TfuncmakeT()TTheexpressiont.Mvyieldsafunctionvalueoftypefunc(int)intThesetwoinvocationsareequivalentt.Mv(7)f=t.Mv;f(7)Similarly,theexpressionpt.Mpyieldsafunctionvalueoftypefunc(float32)float32Aswithselectors,areferencetoanon-interfacemethodwithavaluereceiverusingapointerwillautomaticallydereferencethatpointerpt.Mvisequivalentto(*pt).Mv.Aswithmethodcalls,areferencetoanon-interfacemethodwithapointerreceiverusinganaddressablevaluewillautomaticallytaketheaddressofthatvaluet.Mpisequivalentto(&t).Mp.f=t.Mv;f(7)liket.Mv(7)f=pt.Mp;f(7)likept.Mp(7)f=pt.Mv;f(7)like(*pt).Mv(7)f=t.Mp;f(7)like(&t).Mp(7)f=makeT().MpinvalidresultofmakeT()isnotaddressableAlthoughtheexamplesaboveusenon-interfacetypes,itisalsolegaltocreateamethodvaluefromavalueofinterfacetype.variinterface{M(int)}=myValf=i.M;f(7)likei.M(7)ConversionsConversionsareexpressionsoftheformT(x)whereTisatypeandxisanexpressionthatcanbeconvertedtotypeT.Conversion=Type(Expression[,]).Ifthetypestartswiththeoperator*or<-,orifthetypestartswiththekeywordfuncandhasnoresultlist,itmustbeparenthesizedwhennecessarytoavoidambiguity*Point(p)sameas*(Point(p))(*Point)(p)pisconvertedto*Point<-chanint(c)sameas<-(chanint(c))(<-chanint)(c)cisconvertedto<-chanintfunc()(x)functionsignaturefunc()x(func())(x)xisconvertedtofunc()(func()int)(x)xisconvertedtofunc()intfunc()int(x)xisconvertedtofunc()int(unambiguous)AconstantvaluexcanbeconvertedtotypeTinanyofthesecasesxisrepresentablebyavalueoftypeT.xisafloating-pointconstant,Tisafloating-pointtype,andxisrepresentablebyavalueoftypeTafterroundingusingIEEE754round-to-evenrules.TheconstantT(x)istheroundedvalue.xisanintegerconstantandTisastringtype.Thesameruleasfornon-constantxappliesinthiscase.Convertingaconstantyieldsatypedconstantasresult.uint(iota)iotavalueoftypeuintfloat32(2.718281828)2.718281828oftypefloat32complex128(1)1.0+0.0ioftypecomplex128float32(0.49999999)0.5oftypefloat32string(x)xoftypestringstring(0x266c)♬oftypestringMyString(foo+bar)foobaroftypeMyStringstring([]byte{a})notaconstant[]byte{a}isnotaconstant(*int)(nil)notaconstantnilisnotaconstant,*intisnotaboolean,numeric,orstringtypeint(1.2)illegal1.2cannotberepresentedasanintstring(65.0)illegal65.0isnotanintegerconstantAnon-constantvaluexcanbeconvertedtotypeTinanyofthesecasesxisassignabletoT.xstypeandThaveidenticalunderlyingtypes.xstypeandTareunnamedpointertypesandtheirpointerbasetypeshaveidenticalunderlyingtypes.xstypeandTarebothintegerorfloatingpointtypes.xstypeandTarebothcomplextypes.xisanintegerorasliceofbytesorrunesandTisastringtype.xisastringandTisasliceofbytesorrunes.Specificrulesapplyto(non-constant)conversionsbetweennumerictypesortoandfromastringtype.Theseconversionsmaychangetherepresentationofxandincurarun-timecost.Allotherconversionsonlychangethetypebutnottherepresentationofx.Thereisnolinguisticmechanismtoconvertbetweenpointersandintegers.Thepackageunsafeimplementsthisfunctionalityunderrestrictedcircumstances.ConversionsbetweennumerictypesFortheconversionofnon-constantnumericvalues,thefollowingrulesapplyWhenconvertingbetweenintegertypes,ifthevalueisasignedinteger,itissignextendedtoimplicitinfiniteprecision;otherwiseitiszeroextended.Itisthentruncatedtofitintheresulttypessize.Forexample,ifv=uint16(0x10F0),thenuint32(int8(v))==0xFFFFFFF0.Theconversionalwaysyieldsavalidvalue;thereisnoindicationofoverflow.Whenconvertingafloating-pointnumbertoaninteger,thefractionisdiscarded(truncationtowardszero).Whenconvertinganintegerorfloating-pointnumbertoafloating-pointtype,oracomplexnumbertoanothercomplextype,theresultvalueisroundedtotheprecisionspecifiedbythedestinationtype.Forinstance,thevalueofavariablexoftypefloat32maybestoredusingadditionalprecisionbeyondthatofanIEEE-75432-bitnumber,butfloat32(x)representstheresultofroundingxsvalueto32-bitprecision.Similarly,x+0.1mayusemorethan32bitsofprecision,butfloat32(x+0.1)doesnot.Inallnon-constantconversionsinvolvingfloating-pointorcomplexvalues,iftheresulttypecannotrepresentthevaluetheconversionsucceedsbuttheresultvalueisimplementation-dependent.ConversionstoandfromastringtypeConvertingasignedorunsignedintegervaluetoastringtypeyieldsastringcontainingtheUTF-8representationoftheinteger.ValuesoutsidetherangeofvalidUnicodecodepointsareconvertedtouFFFD.string(a)astring(-1)ufffd==xefxbfxbdstring(0xf8)u00f8==ø==xc3xb8typeMyStringstringMyString(0x65e5)u65e5==日==xe6x97xa5Convertingasliceofbytestoastringtypeyieldsastringwhosesuccessivebytesaretheelementsoftheslice.string([]byte{h,e,l,l,xc3,xb8})helløstring([]byte{})string([]byte(nil))typeMyBytes[]bytestring(MyBytes{h,e,l,l,xc3,xb8})helløConvertingasliceofrunestoastringtypeyieldsastringthatistheconcatenationoftheindividualrunevaluesconvertedtostrings.string([]rune{0x767d,0x9d6c,0x7fd4})u767du9d6cu7fd4==白鵬翔string([]rune{})string([]rune(nil))typeMyRunes[]runestring(MyRunes{0x767d,0x9d6c,0x7fd4})u767du9d6cu7fd4==白鵬翔Convertingavalueofastringtypetoasliceofbytestypeyieldsaslicewhosesuccessiveelementsarethebytesofthestring.[]byte(hellø)[]byte{h,e,l,l,xc3,xb8}[]byte()[]byte{}MyBytes(hellø)[]byte{h,e,l,l,xc3,xb8}ConvertingavalueofastringtypetoasliceofrunestypeyieldsaslicecontainingtheindividualUnicodecodepointsofthestring.[]rune(MyString(白鵬翔))[]rune{0x767d,0x9d6c,0x7fd4}[]rune()[]rune{}MyRunes(白鵬翔)[]rune{0x767d,0x9d6c,0x7fd4}ConstantexpressionsConstantexpressionsmaycontainonlyconstantoperandsandareevaluatedatcompiletime.Untypedboolean,numeric,andstringconstantsmaybeusedasoperandswhereveritislegaltouseanoperandofboolean,numeric,orstringtype,respectively.Exceptforshiftoperations,iftheoperandsofabinaryoperationaredifferentkindsofuntypedconstants,theoperationand,fornon-booleanoperations,theresultusethekindthatappearslaterinthislistinteger,rune,floating-point,complex.Forexample,anuntypedintegerconstantdividedbyanuntypedcomplexconstantyieldsanuntypedcomplexconstant.Aconstantcomparisonalwaysyieldsanuntypedbooleanconstant.Iftheleftoperandofaconstantshiftexpressionisanuntypedconstant,theresultisanintegerconstant;otherwiseitisaconstantofthesametypeastheleftoperand,whichmustbeofintegertype.Applyingallotheroperatorstountypedconstantsresultsinanuntypedconstantofthesamekind(thatis,aboolean,integer,floating-point,complex,orstringconstant).consta=2+3.0a==5.0(untypedfloating-pointconstant)constb=154b==3(untypedintegerconstant)constc=154.0c==3.75(untypedfloating-pointconstant)constΘfloat64=32Θ==1.0(typefloat64,32isintegerdivision)constΠfloat64=32.Π==1.5(typefloat64,32.isfloatdivision)constd=1<<3.0d==8(untypedintegerconstant)conste=1.0<<3e==8(untypedintegerconstant)constf=int32(1)<<33illegal(constant8589934592overflowsint32)constg=float64(2)>>1illegal(float64(2)isatypedfloating-pointconstant)consth=foo>barh==true(untypedbooleanconstant)constj=truej==true(untypedbooleanconstant)constk=w+1k==x(untypedruneconstant)constl=hil==hi(untypedstringconstant)constm=string(k)m==x(typestring)constΣ=1-0.707i(untypedcomplexconstant)constΔ=Σ+2.0e-4(untypedcomplexconstant)constΦ=iota*1i-11i(untypedcomplexconstant)Applyingthebuilt-infunctioncomplextountypedinteger,rune,orfloating-pointconstantsyieldsanuntypedcomplexconstant.constic=complex(0,c)ic==3.75i(untypedcomplexconstant)constiΘ=complex(0,Θ)iΘ==1.5i(typecomplex128)Constantexpressionsarealwaysevaluatedexactly;intermediatevaluesandtheconstantsthemselvesmayrequireprecisionsignificantlylargerthansupportedbyanypredeclaredtypeinthelanguage.ThefollowingarelegaldeclarationsconstHuge=1<<100Huge==1267650600228229401496703205376(untypedintegerconstant)constFourint8=Huge>>98Four==4(typeint8)Thedivisorofaconstantdivisionorremainderoperationmustnotbezero3.140.0illegaldivisionbyzeroThevaluesoftypedconstantsmustalwaysbeaccuratelyrepresentableasvaluesoftheconstanttype.Thefollowingconstantexpressionsareillegaluint(-1)-1cannotberepresentedasauintint(3.14)3.14cannotberepresentedasanintint64(Huge)1267650600228229401496703205376cannotberepresentedasanint64Four*300operand300cannotberepresentedasanint8(typeofFour)Four*100product400cannotberepresentedasanint8(typeofFour)Themaskusedbytheunarybitwisecomplementoperator^matchestherulefornon-constantsthemaskisall1sforunsignedconstantsand-1forsignedanduntypedconstants.^1untypedintegerconstant,equalto-2uint8(^1)illegalsameasuint8(-2),-2cannotberepresentedasauint8^uint8(1)typeduint8constant,sameas0xFF^uint8(1)=uint8(0xFE)int8(^1)sameasint8(-2)^int8(1)sameas-1^int8(1)=-2ImplementationrestrictionAcompilermayuseroundingwhilecomputinguntypedfloating-pointorcomplexconstantexpressions;seetheimplementationrestrictioninthesectiononconstants.Thisroundingmaycauseafloating-pointconstantexpressiontobeinvalidinanintegercontext,evenifitwouldbeintegralwhencalculatedusinginfiniteprecision.OrderofevaluationWhenevaluatingtheoperandsofanexpression,assignment,orreturnstatement,allfunctioncalls,methodcalls,andcommunicationoperationsareevaluatedinlexicalleft-to-rightorder.Forexample,intheassignmenty[f()],ok=g(h(),i()+x[j()],<-c),k()thefunctioncallsandcommunicationhappenintheorderf(),h(),i(),j(),<-c,g(),andk().However,theorderofthoseeventscomparedtotheevaluationandindexingofxandtheevaluationofyisnotspecified.a=1f=func()int{a++;returna}x=[]int{a,f()}xmaybe[1,2]or[2,2]evaluationorderbetweenaandf()isnotspecifiedm=map[int]int{a1,a2}mmaybe{21}or{22}evaluationorderbetweenthetwomapassignmentsisnotspecifiedm2=map[int]int{af()}m2maybe{23}or{33}evaluationorderbetweenthekeyandthevalueisnotspecifiedFloating-pointoperationswithinasingleexpressionareevaluatedaccordingtotheassociativityoftheoperators.Explicitparenthesesaffecttheevaluationbyoverridingthedefaultassociativity.Intheexpressionx+(y+z)theadditiony+zisperformedbeforeaddingx.StatementsStatementscontrolexecution.Statement=Declaration|LabeledStmt|SimpleStmt|GoStmt|ReturnStmt|BreakStmt|ContinueStmt|GotoStmt|FallthroughStmt|Block|IfStmt|SwitchStmt|SelectStmt|ForStmt|DeferStmt.SimpleStmt=EmptyStmt|ExpressionStmt|SendStmt|IncDecStmt|Assignment|ShortVarDecl.TerminatingstatementsAterminatingstatementisoneofthefollowingAreturnorgotostatement.Acalltothebuilt-infunctionpanic.Ablockinwhichthestatementlistendsinaterminatingstatement.Anifstatementinwhichtheelsebranchispresent,andbothbranchesareterminatingstatements.Aforstatementinwhichtherearenobreakstatementsreferringtotheforstatement,andtheloopconditionisabsent.Aswitchstatementinwhichtherearenobreakstatementsreferringtotheswitchstatement,thereisadefaultcase,andthestatementlistsineachcase,includingthedefault,endinaterminatingstatement,orapossiblylabeledfallthroughstatement.Aselectstatementinwhichtherearenobreakstatementsreferringtotheselectstatement,andthestatementlistsineachcase,includingthedefaultifpresent,endinaterminatingstatement.Alabeledstatementlabelingaterminatingstatement.Allotherstatementsarenotterminating.Astatementlistendsinaterminatingstatementifthelistisnotemptyanditsfinalstatementisterminating.EmptystatementsTheemptystatementdoesnothing.EmptyStmt=.LabeledstatementsAlabeledstatementmaybethetargetofagoto,breakorcontinuestatement.LabeledStmt=LabelStatement.Label=identifier.Errorlog.Panic(errorencountered)ExpressionstatementsWiththeexceptionofspecificbuilt-infunctions,functionandmethodcallsandreceiveoperationscanappearinstatementcontext.Suchstatementsmaybeparenthesized.ExpressionStmt=Expression.Thefollowingbuilt-infunctionsarenotpermittedinstatementcontextappendcapcompleximaglenmakenewrealunsafe.Alignofunsafe.Offsetofunsafe.Sizeofh(x+y)f.Close()<-ch(<-ch)len(foo)illegaliflenisthebuilt-infunctionSendstatementsAsendstatementsendsavalueonachannel.Thechannelexpressionmustbeofchanneltype,thechanneldirectionmustpermitsendoperations,andthetypeofthevaluetobesentmustbeassignabletothechannelselementtype.SendStmt=Channel<-Expression.Channel=Expression.Boththechannelandthevalueexpressionareevaluatedbeforecommunicationbegins.Communicationblocksuntilthesendcanproceed.Asendonanunbufferedchannelcanproceedifareceiverisready.Asendonabufferedchannelcanproceedifthereisroominthebuffer.Asendonaclosedchannelproceedsbycausingarun-timepanic.Asendonanilchannelblocksforever.Channelsactasfirst-in-first-outqueues.Forexample,ifasinglegoroutinesendsonachannelvaluesthatarereceivedbyasinglegoroutine,thevaluesarereceivedintheordersent.Asinglechannelmaybeusedforsendandreceiveoperationsandcallstothebuilt-infunctionscapandlenbyanynumberofgoroutineswithoutfurthersynchronization.ch<-3IncDecstatementsThe++and--statementsincrementordecrementtheiroperandsbytheuntypedconstant1.Aswithanassignment,theoperandmustbeaddressableoramapindexexpression.IncDecStmt=Expression(++|--).ThefollowingassignmentstatementsaresemanticallyequivalentIncDecstatementAssignmentx++x+=1x--x-=1AssignmentsAssignment=ExpressionListassign_opExpressionList.assign_op=[add_op|mul_op]=.Eachleft-handsideoperandmustbeaddressable,amapindexexpression,or(for=assignmentsonly)theblankidentifier.Operandsmaybeparenthesized.x=1*p=f()a[i]=23(k)=<-chsameask=<-chAnassignmentoperationxop=ywhereopisabinaryarithmeticoperationequivalenttox=xopybutevaluatesxonlyonce.Theop=constructisasingletoken.Inassignmentoperations,boththeleft-andright-handexpressionlistsmustcontainexactlyonesingle-valuedexpression,andtheleft-handexpressionmustnotbetheblankidentifier.a[i]<<=2i&^=1<<nAtupleassignmentassignstheindividualelementsofamulti-valuedoperationtoalistofvariables.Therearetwoforms.Inthefirst,therighthandoperandisasinglemulti-valuedexpressionsuchasafunctionevaluationorchannelormapoperationoratypeassertion.Thenumberofoperandsonthelefthandsidemustmatchthenumberofvalues.Forinstance,iffisafunctionreturningtwovalues,x,y=f()assignsthefirstvaluetoxandthesecondtoy.Inthesecondform,thenumberofoperandsontheleftmustequalthenumberofexpressionsontheright,eachofwhichmustbesingle-valued,andthenthexpressionontherightisassignedtothenthoperandontheleftone,two,three=一,二,三Theblankidentifierprovidesawaytoignoreright-handsidevaluesinanassignment_=xevaluatexbutignoreitx,_=f()evaluatef()butignoresecondresultvalueTheassignmentproceedsintwophases.First,theoperandsofindexexpressionsandpointerindirections(includingimplicitpointerindirectionsinselectors)ontheleftandtheexpressionsontherightareallevaluatedintheusualorder.Second,theassignmentsarecarriedoutinleft-to-rightorder.a,b=b,aexchangeaandbx=[]int{1,2,3}i=0i,x[i]=1,2seti=1,x[0]=2i=0x[i],i=2,1setx[0]=2,i=1x[0],x[0]=1,2setx[0]=1,thenx[0]=2(sox[0]==2atend)x[1],x[3]=4,5setx[1]=4,thenpanicsettingx[3]=5.typePointstruct{x,yint}varp*Pointx[2],p.x=6,7setx[2]=6,thenpanicsettingp.x=7i=2x=[]int{3,5,7}fori,x[i]=rangex{seti,x[2]=0,x[0]break}afterthisloop,i==0andx==[]int{3,5,3}Inassignments,eachvaluemustbeassignabletothetypeoftheoperandtowhichitisassigned,withthefollowingspecialcasesIfanuntypedconstantisassignedtoavariableofinterfacetypeortheblankidentifier,theconstantisfirstconvertedtotypebool,rune,int,float64,complex128orstringrespectively,dependingonwhetherthevalueisaboolean,rune,integer,floating-point,complex,orstringconstant.Ifaleft-handsideistheblankidentifier,anytypedornon-constantvalueexceptforthepredeclaredidentifiernilmaybeassignedtoit.IfstatementsIfstatementsspecifytheconditionalexecutionoftwobranchesaccordingtothevalueofabooleanexpression.Iftheexpressionevaluatestotrue,theifbranchisexecuted,otherwise,ifpresent,theelsebranchisexecuted.IfStmt=if[SimpleStmt;]ExpressionBlock[else(IfStmt|Block)].ifx>max{x=max}Theexpressionmaybeprecededbyasimplestatement,whichexecutesbeforetheexpressionisevaluated.ifx=f();x<y{returnx}elseifx>z{returnz}else{returny}SwitchstatementsSwitchstatementsprovidemulti-wayexecution.Anexpressionortypespecifieriscomparedtothecasesinsidetheswitchtodeterminewhichbranchtoexecute.SwitchStmt=ExprSwitchStmt|TypeSwitchStmt.Therearetwoformsexpressionswitchesandtypeswitches.Inanexpressionswitch,thecasescontainexpressionsthatarecomparedagainstthevalueoftheswitchexpression.Inatypeswitch,thecasescontaintypesthatarecomparedagainstthetypeofaspeciallyannotatedswitchexpression.ExpressionswitchesInanexpressionswitch,theswitchexpressionisevaluatedandthecaseexpressions,whichneednotbeconstants,areevaluatedleft-to-rightandtop-to-bottom;thefirstonethatequalstheswitchexpressiontriggersexecutionofthestatementsoftheassociatedcase;theothercasesareskipped.Ifnocasematchesandthereisadefaultcase,itsstatementsareexecuted.Therecanbeatmostonedefaultcaseanditmayappearanywhereintheswitchstatement.Amissingswitchexpressionisequivalenttotheexpressiontrue.ExprSwitchStmt=switch[SimpleStmt;][Expression]{{ExprCaseClause}}.ExprCaseClause=ExprSwitchCaseStatementList.ExprSwitchCase=caseExpressionList|default.Inacaseordefaultclause,thelastnon-emptystatementmaybea(possiblylabeled)fallthroughstatementtoindicatethatcontrolshouldflowfromtheendofthisclausetothefirststatementofthenextclause.Otherwisecontrolflowstotheendoftheswitchstatement.Afallthroughstatementmayappearasthelaststatementofallbutthelastclauseofanexpressionswitch.Theexpressionmaybeprecededbyasimplestatement,whichexecutesbeforetheexpressionisevaluated.switchtag{defaults3()case0,1,2,3s1()case4,5,6,7s2()}switchx=f();{missingswitchexpressionmeanstruecasex<0return-xdefaultreturnx}switch{casex<yf1()casex<zf2()casex==4f3()}TypeswitchesAtypeswitchcomparestypesratherthanvalues.Itisotherwisesimilartoanexpressionswitch.Itismarkedbyaspecialswitchexpressionthathastheformofatypeassertionusingthereservedwordtyperatherthananactualtypeswitchx.(type){cases}CasesthenmatchactualtypesTagainstthedynamictypeoftheexpressionx.Aswithtypeassertions,xmustbeofinterfacetype,andeachnon-interfacetypeTlistedinacasemustimplementthetypeofx.TypeSwitchStmt=switch[SimpleStmt;]TypeSwitchGuard{{TypeCaseClause}}.TypeSwitchGuard=[identifier=]PrimaryExpr.(type).TypeCaseClause=TypeSwitchCaseStatementList.TypeSwitchCase=caseTypeList|default.TypeList=Type{,Type}.TheTypeSwitchGuardmayincludeashortvariabledeclaration.Whenthatformisused,thevariableisdeclaredatthebeginningoftheimplicitblockineachclause.Inclauseswithacaselistingexactlyonetype,thevariablehasthattype;otherwise,thevariablehasthetypeoftheexpressionintheTypeSwitchGuard.Thetypeinacasemaybenil;thatcaseisusedwhentheexpressionintheTypeSwitchGuardisanilinterfacevalue.Givenanexpressionxoftypeinterface{},thefollowingtypeswitchswitchi=x.(type){casenilprintString(xisnil)typeofiistypeofx(interface{})caseintprintInt(i)typeofiisintcasefloat64printFloat64(i)typeofiisfloat64casefunc(int)float64printFunction(i)typeofiisfunc(int)float64casebool,stringprintString(typeisboolorstring)typeofiistypeofx(interface{})defaultprintString(dontknowthetype)typeofiistypeofx(interface{})}couldberewrittenv=xxisevaluatedexactlyonceifv==nil{i=vtypeofiistypeofx(interface{})printString(xisnil)}elseifi,isInt=v.(int);isInt{printInt(i)typeofiisint}elseifi,isFloat64=v.(float64);isFloat64{printFloat64(i)typeofiisfloat64}elseifi,isFunc=v.(func(int)float64);isFunc{printFunction(i)typeofiisfunc(int)float64}else{_,isBool=v.(bool)_,isString=v.(string)ifisBool||isString{i=vtypeofiistypeofx(interface{})printString(typeisboolorstring)}else{i=vtypeofiistypeofx(interface{})printString(dontknowthetype)}}Thetypeswitchguardmaybeprecededbyasimplestatement,whichexecutesbeforetheguardisevaluated.Thefallthroughstatementisnotpermittedinatypeswitch.ForstatementsAforstatementspecifiesrepeatedexecutionofablock.Theiterationiscontrolledbyacondition,aforclause,orarangeclause.ForStmt=for[Condition|ForClause|RangeClause]Block.Condition=Expression.Initssimplestform,aforstatementspecifiestherepeatedexecutionofablockaslongasabooleanconditionevaluatestotrue.Theconditionisevaluatedbeforeeachiteration.Iftheconditionisabsent,itisequivalenttotrue.fora<b{a*=2}AforstatementwithaForClauseisalsocontrolledbyitscondition,butadditionallyitmayspecifyaninitandapoststatement,suchasanassignment,anincrementordecrementstatement.Theinitstatementmaybeashortvariabledeclaration,butthepoststatementmustnot.ForClause=[InitStmt];[Condition];[PostStmt].InitStmt=SimpleStmt.PostStmt=SimpleStmt.fori=0;i<10;i++{f(i)}Ifnon-empty,theinitstatementisexecutedoncebeforeevaluatingtheconditionforthefirstiteration;thepoststatementisexecutedaftereachexecutionoftheblock(andonlyiftheblockwasexecuted).AnyelementoftheForClausemaybeemptybutthesemicolonsarerequiredunlessthereisonlyacondition.Iftheconditionisabsent,itisequivalenttotrue.forcond{S()}isthesameasfor;cond;{S()}for{S()}isthesameasfortrue{S()}Aforstatementwitharangeclauseiteratesthroughallentriesofanarray,slice,stringormap,orvaluesreceivedonachannel.Foreachentryitassignsiterationvaluestocorrespondingiterationvariablesandthenexecutestheblock.RangeClause=(ExpressionList=|IdentifierList=)rangeExpression.Theexpressionontherightintherangeclauseiscalledtherangeexpression,whichmaybeanarray,pointertoanarray,slice,string,map,orchannelpermittingreceiveoperations.Aswithanassignment,theoperandsontheleftmustbeaddressableormapindexexpressions;theydenotetheiterationvariables.Iftherangeexpressionisachannel,onlyoneiterationvariableispermitted,otherwisetheremaybeoneortwo.Inthelattercase,iftheseconditerationvariableistheblankidentifier,therangeclauseisequivalenttothesameclausewithonlythefirstvariablepresent.Therangeexpressionisevaluatedoncebeforebeginningtheloop,withoneexception.Iftherangeexpressionisanarrayorapointertoanarrayandonlythefirstiterationvalueispresent,onlytherangeexpressionslengthisevaluated;ifthatlengthisconstantbydefinition,therangeexpressionitselfwillnotbeevaluated.Functioncallsontheleftareevaluatedonceperiteration.Foreachiteration,iterationvaluesareproducedasfollowsRangeexpression1stvalue2ndvalue(if2ndvariableispresent)arrayorslicea[n]E,*[n]E,or[]Eindexiinta[i]Estringsstringtypeindexiintseebelowrunemapmmap[K]VkeykKm[k]VchannelcchanE,<-chanEelementeEForanarray,pointertoarray,orslicevaluea,theindexiterationvaluesareproducedinincreasingorder,startingatelementindex0.Ifonlythefirstiterationvariableispresent,therangeloopproducesiterationvaluesfrom0uptolen(a)-1anddoesnotindexintothearrayorsliceitself.Foranilslice,thenumberofiterationsis0.Forastringvalue,therangeclauseiteratesovertheUnicodecodepointsinthestringstartingatbyteindex0.Onsuccessiveiterations,theindexvaluewillbetheindexofthefirstbyteofsuccessiveUTF-8-encodedcodepointsinthestring,andthesecondvalue,oftyperune,willbethevalueofthecorrespondingcodepoint.IftheiterationencountersaninvalidUTF-8sequence,thesecondvaluewillbe0xFFFD,theUnicodereplacementcharacter,andthenextiterationwilladvanceasinglebyteinthestring.Theiterationorderovermapsisnotspecifiedandisnotguaranteedtobethesamefromoneiterationtothenext.Ifmapentriesthathavenotyetbeenreachedareremovedduringiteration,thecorrespondingiterationvalueswillnotbeproduced.Ifmapentriesarecreatedduringiteration,thatentrymaybeproducedduringtheiterationormaybeskipped.Thechoicemayvaryforeachentrycreatedandfromoneiterationtothenext.Ifthemapisnil,thenumberofiterationsis0.Forchannels,theiterationvaluesproducedarethesuccessivevaluessentonthechanneluntilthechannelisclosed.Ifthechannelisnil,therangeexpressionblocksforever.Theiterationvaluesareassignedtotherespectiveiterationvariablesasinanassignmentstatement.Theiterationvariablesmaybedeclaredbytherangeclauseusingaformofshortvariabledeclaration(=).Inthiscasetheirtypesaresettothetypesoftherespectiveiterationvaluesandtheirscopeendsattheendoftheforstatement;theyarere-usedineachiteration.Iftheiterationvariablesaredeclaredoutsidetheforstatement,afterexecutiontheirvalueswillbethoseofthelastiteration.vartestdata*struct{a*[7]int}fori,_=rangetestdata.a{testdata.aisneverevaluated;len(testdata.a)isconstantirangesfrom0to6f(i)}vara[10]stringfori,s=rangea{typeofiisinttypeofsisstrings==a[i]g(i,s)}varkeystringvarvalinterface{}valuetypeofmisassignabletovalm=map[string]int{mon0,tue1,wed2,thu3,fri4,sat5,sun6}forkey,val=rangem{h(key,val)}key==lastmapkeyencounterediniterationval==map[key]varchchanWork=producer()forw=rangech{doWork(w)}GostatementsAgostatementstartstheexecutionofafunctioncallasanindependentconcurrentthreadofcontrol,orgoroutine,withinthesameaddressspace.GoStmt=goExpression.Theexpressionmustbeafunctionormethodcall;itcannotbeparenthesized.Callsofbuilt-infunctionsarerestrictedasforexpressionstatements.Thefunctionvalueandparametersareevaluatedasusualinthecallinggoroutine,butunlikewitharegularcall,programexecutiondoesnotwaitfortheinvokedfunctiontocomplete.Instead,thefunctionbeginsexecutingindependentlyinanewgoroutine.Whenthefunctionterminates,itsgoroutinealsoterminates.Ifthefunctionhasanyreturnvalues,theyarediscardedwhenthefunctioncompletes.goServer()gofunc(chchan<-bool){for{sleep(10);ch<-true;}}(c)SelectstatementsAselectstatementchooseswhichofasetofpossiblecommunicationswillproceed.Itlookssimilartoaswitchstatementbutwiththecasesallreferringtocommunicationoperations.SelectStmt=select{{CommClause}}.CommClause=CommCaseStatementList.CommCase=case(SendStmt|RecvStmt)|default.RecvStmt=[ExpressionList=|IdentifierList=]RecvExpr.RecvExpr=Expression.RecvExprmustbeareceiveoperation.Forallthecasesintheselectstatement,thechannelexpressionsareevaluatedintop-to-bottomorder,alongwithanyexpressionsthatappearontherighthandsideofsendstatements.Achannelmaybenil,whichisequivalenttothatcasenotbeingpresentintheselectstatementexcept,ifasend,itsexpressionisstillevaluated.Ifanyoftheresultingoperationscanproceed,oneofthoseischosenandthecorrespondingcommunicationandstatementsareevaluated.Otherwise,ifthereisadefaultcase,thatexecutes;ifthereisnodefaultcase,thestatementblocksuntiloneofthecommunicationscancomplete.Therecanbeatmostonedefaultcaseanditmayappearanywhereintheselectstatement.Iftherearenocaseswithnon-nilchannels,thestatementblocksforever.Evenifthestatementblocks,thechannelandsendexpressionsareevaluatedonlyonce,uponenteringtheselectstatement.Sinceallthechannelsandsendexpressionsareevaluated,anysideeffectsinthatevaluationwilloccurforallthecommunicationsintheselectstatement.Ifmultiplecasescanproceed,auniformpseudo-randomchoiceismadetodecidewhichsinglecommunicationwillexecute.Thereceivecasemaydeclareoneortwonewvariablesusingashortvariabledeclaration.varc,c1,c2,c3chanintvari1,i2intselect{casei1=<-c1print(received,i1,fromc1n)casec2<-i2print(sent,i2,toc2n)casei3,ok=(<-c3)sameasi3,ok=<-c3ifok{print(received,i3,fromc3n)}else{print(c3isclosedn)}defaultprint(nocommunicationn)}for{sendrandomsequenceofbitstocselect{casec<-0notenostatement,nofallthrough,nofoldingofcasescasec<-1}}select{}blockforeverReturnstatementsAreturnstatementinafunctionFterminatestheexecutionofF,andoptionallyprovidesoneormoreresultvalues.AnyfunctionsdeferredbyFareexecutedbeforeFreturnstoitscaller.ReturnStmt=return[ExpressionList].Inafunctionwithoutaresulttype,areturnstatementmustnotspecifyanyresultvalues.funcnoResult(){return}TherearethreewaystoreturnvaluesfromafunctionwitharesulttypeThereturnvalueorvaluesmaybeexplicitlylistedinthereturnstatement.Eachexpressionmustbesingle-valuedandassignabletothecorrespondingelementofthefunctionsresulttype.funcsimpleF()int{return2}funccomplexF1()(refloat64,imfloat64){return-7.0,-4.0}Theexpressionlistinthereturnstatementmaybeasinglecalltoamulti-valuedfunction.Theeffectisasifeachvaluereturnedfromthatfunctionwereassignedtoatemporaryvariablewiththetypeoftherespectivevalue,followedbyareturnstatementlistingthesevariables,atwhichpointtherulesofthepreviouscaseapply.funccomplexF2()(refloat64,imfloat64){returncomplexF1()}Theexpressionlistmaybeemptyifthefunctionsresulttypespecifiesnamesforitsresultparameters.Theresultparametersactasordinarylocalvariablesandthefunctionmayassignvaluestothemasnecessary.Thereturnstatementreturnsthevaluesofthesevariables.funccomplexF3()(refloat64,imfloat64){re=7.0im=4.0return}func(devnull)Write(p[]byte)(nint,_error){n=len(p)return}Regardlessofhowtheyaredeclared,alltheresultvaluesareinitializedtothezerovaluesfortheirtypeuponentrytothefunction.Areturnstatementthatspecifiesresultssetstheresultparametersbeforeanydeferredfunctionsareexecuted.BreakstatementsAbreakstatementterminatesexecutionoftheinnermostfor,switch,orselectstatement.BreakStmt=break[Label].Ifthereisalabel,itmustbethatofanenclosingfor,switch,orselectstatement,andthatistheonewhoseexecutionterminates.OuterLoopfori=0;i<n;i++{forj=0;j<m;j++{switcha[i][j]{casenilstate=ErrorbreakOuterLoopcaseitemstate=FoundbreakOuterLoop}}}ContinuestatementsAcontinuestatementbeginsthenextiterationoftheinnermostforloopatitspoststatement.ContinueStmt=continue[Label].Ifthereisalabel,itmustbethatofanenclosingforstatement,andthatistheonewhoseexecutionadvances.RowLoopfory,row=rangerows{forx,data=rangerow{ifdata==endOfRow{continueRowLoop}row[x]=data+bias(x,y)}}GotostatementsAgotostatementtransferscontroltothestatementwiththecorrespondinglabel.GotoStmt=gotoLabel.gotoErrorExecutingthegotostatementmustnotcauseanyvariablestocomeintoscopethatwerenotalreadyinscopeatthepointofthegoto.Forinstance,thisexamplegotoLBADv=3LiserroneousbecausethejumptolabelLskipsthecreationofv.Agotostatementoutsideablockcannotjumptoalabelinsidethatblock.Forinstance,thisexampleifn%2==1{gotoL1}forn>0{f()n--L1f()n--}iserroneousbecausethelabelL1isinsidetheforstatementsblockbutthegotoisnot.FallthroughstatementsAfallthroughstatementtransferscontroltothefirststatementofthenextcaseclauseinaexpressionswitchstatement.Itmaybeusedonlyasthefinalnon-emptystatementinsuchaclause.FallthroughStmt=fallthrough.DeferstatementsAdeferstatementinvokesafunctionwhoseexecutionisdeferredtothemomentthesurroundingfunctionreturns,eitherbecausethesurroundingfunctionexecutedareturnstatement,reachedtheendofitsfunctionbody,orbecausethecorrespondinggoroutineispanicking.DeferStmt=deferExpression.Theexpressionmustbeafunctionormethodcall;itcannotbeparenthesized.Callsofbuilt-infunctionsarerestrictedasforexpressionstatements.Eachtimethedeferstatementexecutes,thefunctionvalueandparameterstothecallareevaluatedasusualandsavedanewbuttheactualfunctionbodyisnotexecuted.Instead,deferredfunctionsareexecutedimmediatelybeforethesurroundingfunctionreturns,inthereverseordertheyweredeferred.Forinstance,ifthedeferredfunctionisafunctionliteralandthesurroundingfunctionhasnamedresultparametersthatareinscopewithintheliteral,thedeferredfunctionmayaccessandmodifytheresultparametersbeforetheyarereturned.Ifthedeferredfunctionhasanyreturnvalues,theyarediscardedwhenthefunctioncompletes.(Seealsothesectiononhandlingpanics.)lock(l)deferunlock(l)unlockinghappensbeforesurroundingfunctionreturnsprints3210beforesurroundingfunctionreturnsfori=0;i<=3;i++{deferfmt.Print(i)}freturns1funcf()(resultint){deferfunc(){result++}()return0}Built-infunctionsBuilt-infunctionsarepredeclared.Theyarecalledlikeanyotherfunctionbutsomeofthemacceptatypeinsteadofanexpressionasthefirstargument.Thebuilt-infunctionsdonothavestandardGotypes,sotheycanonlyappearincallexpressions;theycannotbeusedasfunctionvalues.BuiltinCall=identifier([BuiltinArgs[,]]).BuiltinArgs=Type[,ArgumentList]|ArgumentList.CloseForachannelc,thebuilt-infunctionclose(c)recordsthatnomorevalueswillbesentonthechannel.Itisanerrorifcisareceive-onlychannel.Sendingtoorclosingaclosedchannelcausesarun-timepanic.Closingthenilchannelalsocausesarun-timepanic.Aftercallingclose,andafteranypreviouslysentvalueshavebeenreceived,receiveoperationswillreturnthezerovalueforthechannelstypewithoutblocking.Themulti-valuedreceiveoperationreturnsareceivedvaluealongwithanindicationofwhetherthechannelisclosed.LengthandcapacityThebuilt-infunctionslenandcaptakeargumentsofvarioustypesandreturnaresultoftypeint.Theimplementationguaranteesthattheresultalwaysfitsintoanint.CallArgumenttypeResultlen(s)stringtypestringlengthinbytes[n]T,*[n]Tarraylength(==n)[]Tslicelengthmap[K]Tmaplength(numberofdefinedkeys)chanTnumberofelementsqueuedinchannelbuffercap(s)[n]T,*[n]Tarraylength(==n)[]TslicecapacitychanTchannelbuffercapacityThecapacityofasliceisthenumberofelementsforwhichthereisspaceallocatedintheunderlyingarray.Atanytimethefollowingrelationshipholds0<=len(s)<=cap(s)Thelengthofanilslice,maporchannelis0.Thecapacityofanilsliceandchannelis0.Theexpressionlen(s)isconstantifsisastringconstant.Theexpressionslen(s)andcap(s)areconstantsifthetypeofsisanarrayorpointertoanarrayandtheexpressionsdoesnotcontainchannelreceivesorfunctioncalls;inthiscasesisnotevaluated.Otherwise,invocationsoflenandcaparenotconstantandsisevaluated.AllocationThebuilt-infunctionnewtakesatypeTandreturnsavalueoftype*T.Thememoryisinitializedasdescribedinthesectiononinitialvalues.new(T)ForinstancetypeSstruct{aint;bfloat64}new(S)dynamicallyallocatesmemoryforavariableoftypeS,initializesit(a=0,b=0.0),andreturnsavalueoftype*Scontainingtheaddressofthememory.Makingslices,mapsandchannelsThebuilt-infunctionmaketakesatypeT,whichmustbeaslice,maporchanneltype,optionallyfollowedbyatype-specificlistofexpressions.ItreturnsavalueoftypeT(not*T).Thememoryisinitializedasdescribedinthesectiononinitialvalues.CallTypeTResultmake(T,n)slicesliceoftypeTwithlengthnandcapacitynmake(T,n,m)slicesliceoftypeTwithlengthnandcapacitymmake(T)mapmapoftypeTmake(T,n)mapmapoftypeTwithinitialspacefornelementsmake(T)channelsynchronouschanneloftypeTmake(T,n)channelasynchronouschanneloftypeT,buffersizenThesizeargumentsnandmmustbeofintegertypeoruntyped.Aconstantsizeargumentmustbenon-negativeandrepresentablebyavalueoftypeint.Ifbothnandmareprovidedandareconstant,thennmustbenolargerthanm.Ifnisnegativeorlargerthanmatruntime,arun-timepanicoccurs.s=make([]int,10,100)slicewithlen(s)==10,cap(s)==100s=make([]int,1e3)slicewithlen(s)==cap(s)==1000s=make([]int,1<<63)illegallen(s)isnotrepresentablebyavalueoftypeints=make([]int,10,0)illegallen(s)>cap(s)c=make(chanint,10)channelwithabuffersizeof10m=make(map[string]int,100)mapwithinitialspacefor100elementsAppendingtoandcopyingslicesThebuilt-infunctionsappendandcopyassistincommonsliceoperations.Forbothfunctions,theresultisindependentofwhetherthememoryreferencedbytheargumentsoverlaps.ThevariadicfunctionappendappendszeroormorevaluesxtosoftypeS,whichmustbeaslicetype,andreturnstheresultingslice,alsooftypeS.Thevaluesxarepassedtoaparameteroftype...TwhereTistheelementtypeofSandtherespectiveparameterpassingrulesapply.Asaspecialcase,appendalsoacceptsafirstargumentassignabletotype[]bytewithasecondargumentofstringtypefollowedby....Thisformappendsthebytesofthestring.append(sS,x...T)STistheelementtypeofSIfthecapacityofsisnotlargeenoughtofittheadditionalvalues,appendallocatesanew,sufficientlylargeunderlyingarraythatfitsboththeexistingsliceelementsandtheadditionalvalues.Otherwise,appendre-usestheunderlyingarray.s0=[]int{0,0}s1=append(s0,2)appendasingleelements1==[]int{0,0,2}s2=append(s1,3,5,7)appendmultipleelementss2==[]int{0,0,2,3,5,7}s3=append(s2,s0...)appendaslices3==[]int{0,0,2,3,5,7,0,0}s4=append(s3[36],s3[2]...)appendoverlappingslices4==[]int{3,5,7,2,3,5,7,0,0}vart[]interface{}t=append(t,42,3.1415,foo)t==[]interface{}{42,3.1415,foo}varb[]byteb=append(b,bar...)appendstringcontentsb==[]byte{b,a,r}Thefunctioncopycopiessliceelementsfromasourcesrctoadestinationdstandreturnsthenumberofelementscopied.BothargumentsmusthaveidenticalelementtypeTandmustbeassignabletoasliceoftype[]T.Thenumberofelementscopiedistheminimumoflen(src)andlen(dst).Asaspecialcase,copyalsoacceptsadestinationargumentassignabletotype[]bytewithasourceargumentofastringtype.Thisformcopiesthebytesfromthestringintothebyteslice.copy(dst,src[]T)intcopy(dst[]byte,srcstring)intExamplesvara=[...]int{0,1,2,3,4,5,6,7}vars=make([]int,6)varb=make([]byte,5)n1=copy(s,a[0])n1==6,s==[]int{0,1,2,3,4,5}n2=copy(s,s[2])n2==4,s==[]int{2,3,4,5,4,5}n3=copy(b,Hello,World!)n3==5,b==[]byte(Hello)DeletionofmapelementsThebuilt-infunctiondeleteremovestheelementwithkeykfromamapm.Thetypeofkmustbeassignabletothekeytypeofm.delete(m,k)removeelementm[k]frommapmIfthemapmisnilortheelementm[k]doesnotexist,deleteisano-op.ManipulatingcomplexnumbersThreefunctionsassembleanddisassemblecomplexnumbers.Thebuilt-infunctioncomplexconstructsacomplexvaluefromafloating-pointrealandimaginarypart,whilerealandimagextracttherealandimaginarypartsofacomplexvalue.complex(realPart,imaginaryPartfloatT)complexTreal(complexT)floatTimag(complexT)floatTThetypeoftheargumentsandreturnvaluecorrespond.Forcomplex,thetwoargumentsmustbeofthesamefloating-pointtypeandthereturntypeisthecomplextypewiththecorrespondingfloating-pointconstituentscomplex64forfloat32,complex128forfloat64.Therealandimagfunctionstogetherformtheinverse,soforacomplexvaluez,z==complex(real(z),imag(z)).Iftheoperandsofthesefunctionsareallconstants,thereturnvalueisaconstant.vara=complex(2,-2)complex128varb=complex(1.0,-1.4)complex128x=float32(math.Cos(math.Pi2))float32varc64=complex(5,-x)complex64varim=imag(b)float64varrl=real(c64)float32HandlingpanicsTwobuilt-infunctions,panicandrecover,assistinreportingandhandlingrun-timepanicsandprogram-definederrorconditions.funcpanic(interface{})funcrecover()interface{}WhileexecutingafunctionF,anexplicitcalltopanicorarun-timepanicterminatestheexecutionofF.AnyfunctionsdeferredbyFarethenexecutedasusual.Next,anydeferredfunctionsrunbyFscallerarerun,andsoonuptoanydeferredbythetop-levelfunctionintheexecutinggoroutine.Atthatpoint,theprogramisterminatedandtheerrorconditionisreported,includingthevalueoftheargumenttopanic.Thisterminationsequenceiscalledpanicking.panic(42)panic(unreachable)panic(Error(cannotparse))Therecoverfunctionallowsaprogramtomanagebehaviorofapanickinggoroutine.SupposeafunctionGdefersafunctionDthatcallsrecoverandapanicoccursinafunctiononthesamegoroutineinwhichGisexecuting.WhentherunningofdeferredfunctionsreachesD,thereturnvalueofDscalltorecoverwillbethevaluepassedtothecallofpanic.IfDreturnsnormally,withoutstartinganewpanic,thepanickingsequencestops.Inthatcase,thestateoffunctionscalledbetweenGandthecalltopanicisdiscarded,andnormalexecutionresumes.AnyfunctionsdeferredbyGbeforeDarethenrunandGsexecutionterminatesbyreturningtoitscaller.Thereturnvalueofrecoverisnilifanyofthefollowingconditionsholdspanicsargumentwasnil;thegoroutineisnotpanicking;recoverwasnotcalleddirectlybyadeferredfunction.Theprotectfunctionintheexamplebelowinvokesthefunctionargumentgandprotectscallersfromrun-timepanicsraisedbyg.funcprotect(gfunc()){deferfunc(){log.Println(done)Printlnexecutesnormallyevenifthereisapanicifx=recover();x!=nil{log.Printf(runtimepanic%v,x)}}()log.Println(start)g()}BootstrappingCurrentimplementationsprovideseveralbuilt-infunctionsusefulduringbootstrapping.Thesefunctionsaredocumentedforcompletenessbutarenotguaranteedtostayinthelanguage.Theydonotreturnaresult.FunctionBehaviorprintprintsallarguments;formattingofargumentsisimplementation-specificprintlnlikeprintbutprintsspacesbetweenargumentsandanewlineattheendPackagesGoprogramsareconstructedbylinkingtogetherpackages.Apackageinturnisconstructedfromoneormoresourcefilesthattogetherdeclareconstants,types,variablesandfunctionsbelongingtothepackageandwhichareaccessibleinallfilesofthesamepackage.Thoseelementsmaybeexportedandusedinanotherpackage.SourcefileorganizationEachsourcefileconsistsofapackageclausedefiningthepackagetowhichitbelongs,followedbyapossiblyemptysetofimportdeclarationsthatdeclarepackageswhosecontentsitwishestouse,followedbyapossiblyemptysetofdeclarationsoffunctions,types,variables,andconstants.SourceFile=PackageClause;{ImportDecl;}{TopLevelDecl;}.PackageclauseApackageclausebeginseachsourcefileanddefinesthepackagetowhichthefilebelongs.PackageClause=packagePackageName.PackageName=identifier.ThePackageNamemustnotbetheblankidentifier.packagemathAsetoffilessharingthesamePackageNameformtheimplementationofapackage.Animplementationmayrequirethatallsourcefilesforapackageinhabitthesamedirectory.ImportdeclarationsAnimportdeclarationstatesthatthesourcefilecontainingthedeclarationdependsonfunctionalityoftheimportedpackage(§Programinitializationandexecution)andenablesaccesstoexportedidentifiersofthatpackage.Theimportnamesanidentifier(PackageName)tobeusedforaccessandanImportPaththatspecifiesthepackagetobeimported.ImportDecl=import(ImportSpec|({ImportSpec;})).ImportSpec=[.|PackageName]ImportPath.ImportPath=string_lit.ThePackageNameisusedinqualifiedidentifierstoaccessexportedidentifiersofthepackagewithintheimportingsourcefile.Itisdeclaredinthefileblock.IfthePackageNameisomitted,itdefaultstotheidentifierspecifiedinthepackageclauseoftheimportedpackage.Ifanexplicitperiod(.)appearsinsteadofaname,allthepackagesexportedidentifiersdeclaredinthatpackagespackageblockwillbedeclaredintheimportingsourcefilesfileblockandcanbeaccessedwithoutaqualifier.TheinterpretationoftheImportPathisimplementation-dependentbutitistypicallyasubstringofthefullfilenameofthecompiledpackageandmayberelativetoarepositoryofinstalledpackages.ImplementationrestrictionAcompilermayrestrictImportPathstonon-emptystringsusingonlycharactersbelongingtoUnicodesL,M,N,P,andSgeneralcategories(theGraphiccharacterswithoutspaces)andmayalsoexcludethecharactersandtheUnicodereplacementcharacterU+FFFD.Assumewehavecompiledapackagecontainingthepackageclausepackagemath,whichexportsfunctionSin,andinstalledthecompiledpackageinthefileidentifiedbylibmath.ThistableillustrateshowSinmaybeaccessedinfilesthatimportthepackageafterthevarioustypesofimportdeclaration.ImportdeclarationLocalnameofSinimportlibmathmath.Sinimportmlibmathm.Sinimport.libmathSinAnimportdeclarationdeclaresadependencyrelationbetweentheimportingandimportedpackage.Itisillegalforapackagetoimportitself,directlyorindirectly,ortodirectlyimportapackagewithoutreferringtoanyofitsexportedidentifiers.Toimportapackagesolelyforitsside-effects(initialization),usetheblankidentifierasexplicitpackagenameimport_libmathAnexamplepackageHereisacompleteGopackagethatimplementsaconcurrentprimesieve.packagemainimportfmtSendthesequence2,3,4,…tochannelch.funcgenerate(chchan<-int){fori=2;;i++{ch<-iSenditochannelch.}}Copythevaluesfromchannelsrctochanneldst,removingthosedivisiblebyprime.funcfilter(src<-chanint,dstchan<-int,primeint){fori=rangesrc{Loopovervaluesreceivedfromsrc.ifi%prime!=0{dst<-iSenditochanneldst.}}}TheprimesieveDaisy-chainfilterprocessestogether.funcsieve(){ch=make(chanint)Createanewchannel.gogenerate(ch)Startgenerate()asasubprocess.for{prime=<-chfmt.Print(prime,n)ch1=make(chanint)gofilter(ch,ch1,prime)ch=ch1}}funcmain(){sieve()}PrograminitializationandexecutionThezerovalueWhenmemoryisallocatedtostoreavalue,eitherthroughadeclarationoracallofmakeornew,andnoexplicitinitializationisprovided,thememoryisgivenadefaultinitialization.Eachelementofsuchavalueissettothezerovalueforitstypefalseforbooleans,0forintegers,0.0forfloats,forstrings,andnilforpointers,functions,interfaces,slices,channels,andmaps.Thisinitializationisdonerecursively,soforinstanceeachelementofanarrayofstructswillhaveitsfieldszeroedifnovalueisspecified.Thesetwosimpledeclarationsareequivalentvariintvariint=0AftertypeTstruct{iint;ffloat64;next*T}t=new(T)thefollowingholdst.i==0t.f==0.0t.next==nilThesamewouldalsobetrueaftervartTProgramexecutionApackagewithnoimportsisinitializedbyassigninginitialvaluestoallitspackage-levelvariablesandthencallinganypackage-levelfunctionwiththenameandsignatureoffuncinit()definedinitssource.Apackage-scopeorfile-scopeidentifierwithnameinitmayonlybedeclaredtobeafunctionwiththissignature.Multiplesuchfunctionsmaybedefined,evenwithinasinglesourcefile;theyexecuteinunspecifiedorder.Withinapackage,package-levelvariablesareinitialized,andconstantvaluesaredetermined,accordingtoorderofreferenceiftheinitializerofAdependsonB,AwillbesetafterB.Dependencyanalysisdoesnotdependontheactualvaluesoftheitemsbeinginitialized,onlyontheirappearanceinthesource.AdependsonBifthevalueofAcontainsamentionofB,containsavaluewhoseinitializermentionsB,ormentionsafunctionthatmentionsB,recursively.Itisanerrorifsuchdependenciesformacycle.Iftwoitemsarenotinterdependent,theywillbeinitializedintheordertheyappearinthesource,possiblyinmultiplefiles,aspresentedtothecompiler.Sincethedependencyanalysisisdoneperpackage,itcanproduceunspecifiedresultsifAsinitializercallsafunctiondefinedinanotherpackagethatreferstoB.Aninitfunctioncannotbereferredtofromanywhereinaprogram.Inparticular,initcannotbecalledexplicitly,norcanapointertoinitbeassignedtoafunctionvariable.Ifapackagehasimports,theimportedpackagesareinitializedbeforeinitializingthepackageitself.IfmultiplepackagesimportapackageP,Pwillbeinitializedonlyonce.Theimportingofpackages,byconstruction,guaranteesthattherecanbenocyclicdependenciesininitialization.Acompleteprogramiscreatedbylinkingasingle,unimportedpackagecalledthemainpackagewithallthepackagesitimports,transitively.Themainpackagemusthavepackagenamemainanddeclareafunctionmainthattakesnoargumentsandreturnsnovalue.funcmain(){…}Programexecutionbeginsbyinitializingthemainpackageandtheninvokingthefunctionmain.Whenthefunctionmainreturns,theprogramexits.Itdoesnotwaitforother(non-main)goroutinestocomplete.Packageinitialization—variableinitializationandtheinvocationofinitfunctions—happensinasinglegoroutine,sequentially,onepackageatatime.Aninitfunctionmaylaunchothergoroutines,whichcanrunconcurrentlywiththeinitializationcode.However,initializationalwayssequencestheinitfunctionsitwillnotstartthenextinituntilthepreviousonehasreturned.ErrorsThepredeclaredtypeerrorisdefinedastypeerrorinterface{Error()string}Itistheconventionalinterfaceforrepresentinganerrorcondition,withthenilvaluerepresentingnoerror.Forinstance,afunctiontoreaddatafromafilemightbedefinedfuncRead(f*File,b[]byte)(nint,errerror)Run-timepanicsExecutionerrorssuchasattemptingtoindexanarrayoutofboundstriggerarun-timepanicequivalenttoacallofthebuilt-infunctionpanicwithavalueoftheimplementation-definedinterfacetyperuntime.Error.Thattypesatisfiesthepredeclaredinterfacetypeerror.Theexacterrorvaluesthatrepresentdistinctrun-timeerrorconditionsareunspecified.packageruntimetypeErrorinterface{errorandperhapsothermethods}SystemconsiderationsPackageunsafeThebuilt-inpackageunsafe,knowntothecompiler,providesfacilitiesforlow-levelprogrammingincludingoperationsthatviolatethetypesystem.Apackageusingunsafemustbevettedmanuallyfortypesafety.ThepackageprovidesthefollowinginterfacepackageunsafetypeArbitraryTypeintshorthandforanarbitraryGotype;itisnotarealtypetypePointer*ArbitraryTypefuncAlignof(variableArbitraryType)uintptrfuncOffsetof(selectorArbitraryType)uintptrfuncSizeof(variableArbitraryType)uintptrAnypointerorvalueofunderlyingtypeuintptrcanbeconvertedtoaPointertypeandviceversa.APointerisapointertypebutaPointervaluemaynotbedereferenced.varffloat64bits=*(*uint64)(unsafe.Pointer(&f))typeptrunsafe.Pointerbits=*(*uint64)(ptr(&f))varpptr=nilThefunctionsAlignofandSizeoftakeanexpressionxofanytypeandreturnthealignmentorsize,respectively,ofahypotheticalvariablevasifvwasdeclaredviavarv=x.ThefunctionOffsetoftakesa(possiblyparenthesized)selectors.f,denotingafieldfofthestructdenotedbysor*s,andreturnsthefieldoffsetinbytesrelativetothestructsaddress.Iffisanembeddedfield,itmustbereachablewithoutpointerindirectionsthroughfieldsofthestruct.Forastructswithfieldfuintptr(unsafe.Pointer(&s))+unsafe.Offsetof(s.f)==uintptr(unsafe.Pointer(&s.f))Computerarchitecturesmayrequirememoryaddressestobealigned;thatis,foraddressesofavariabletobeamultipleofafactor,thevariablestypesalignment.ThefunctionAlignoftakesanexpressiondenotingavariableofanytypeandreturnsthealignmentofthe(typeofthe)variableinbytes.Foravariablexuintptr(unsafe.Pointer(&x))%unsafe.Alignof(x)==0CallstoAlignof,Offsetof,andSizeofarecompile-timeconstantexpressionsoftypeuintptr.SizeandalignmentguaranteesForthenumerictypes,thefollowingsizesareguaranteedtypesizeinbytesbyte,uint8,int81uint16,int162uint32,int32,float324uint64,int64,float64,complex648complex12816ThefollowingminimalalignmentpropertiesareguaranteedForavariablexofanytypeunsafe.Alignof(x)isatleast1.Foravariablexofstructtypeunsafe.Alignof(x)isthelargestofallthevaluesunsafe.Alignof(x.f)foreachfieldfofx,butatleast1.Foravariablexofarraytypeunsafe.Alignof(x)isthesameasunsafe.Alignof(x[0]),butatleast1.Astructorarraytypehassizezeroifitcontainsnofields(orelements,respectively)thathaveasizegreaterthanzero.Twodistinctzero-sizevariablesmayhavethesameaddressinmemory.Buildversiongo1.2.Exceptasnoted,thecontentofthispageislicensedundertheCreativeCommonsAttribution3.0License,andcodeislicensedunderaBSDlicense.TermsofService|PrivacyPolicy";
  int _idx = 0;
  
  SpecText() { }
  
  String nextChar() {
    int idx = _idx%_text.length;
    var c = _text.substring(idx, idx+1);
    _idx++;
    return c;
  }
}